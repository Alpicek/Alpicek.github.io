import{a as I,r as f,q as N,X as c,w as e,o as i,f as n,e as a,s as p,t as o,Q as _,Z as r,c as R,a0 as B,a1 as P,a2 as S}from"./index-BwBwbac9.js";import{a as u,Q as m}from"./QCard-DXIFboRd.js";import{Q as g}from"./QCardActions-C4Db81zt.js";import{Q as F,a as x,b as y}from"./QItem-Bsd7CjVV.js";import{Q as L}from"./QList-DBkTQZwW.js";import{Q as V}from"./QPage-4Xogj7-U.js";import{u as W}from"./useAuth-DxKPuktf.js";import{u as Z}from"./useWishes-3duOIuUh.js";import{u as j}from"./useFriends-VgJvb5Ak.js";import"./supabase-CjQk5Uh3.js";const M={class:"row q-gutter-md"},U={class:"col-12 col-md-4"},E={class:"text-h3 text-primary"},T={class:"col-12 col-md-4"},X={class:"text-h3 text-secondary"},G={class:"col-12 col-md-4"},H={class:"text-h3 text-orange"},J={class:"q-mt-lg"},dt=I({__name:"IndexPage",setup(K){const{user:d}=W(),{fetchWishes:h,fetchFriendsWishes:$}=Z(),{fetchFriends:b,fetchPendingRequests:w}=j(),Q=f(0),k=f(0),q=f(0),v=f([]),A=s=>s.name&&s.surname?`${s.name} ${s.surname}`:s.username||s.email,z=s=>s.name&&s.surname?`${s.name.charAt(0)}${s.surname.charAt(0)}`:s.username?s.username.charAt(0).toUpperCase():s.email.charAt(0).toUpperCase(),D=s=>new Date(s).toLocaleDateString("cs-CZ");return N(async()=>{if(d.value){const s=await h(d.value.id);Q.value=s?.data?.length||0;const t=await b(d.value.id);k.value=t?.data?.length||0;const l=await w(d.value.id);q.value=l?.data?.length||0;const C=await $(d.value.id);C?.data&&(v.value=C.data.slice(0,5))}}),(s,t)=>(i(),c(V,{class:"q-pa-md"},{default:e(()=>[t[13]||(t[13]=n("div",{class:"text-h4 q-mb-md"},"Vítejte v Darkovnicku!",-1)),n("div",M,[n("div",U,[a(m,{class:"text-center"},{default:e(()=>[a(u,null,{default:e(()=>[a(p,{name:"card_giftcard",size:"3rem",color:"primary"}),t[3]||(t[3]=n("div",{class:"text-h6 q-mt-md"},"Moje přání",-1)),n("div",E,o(Q.value),1)]),_:1,__:[3]}),a(g,null,{default:e(()=>[a(_,{flat:"",color:"primary",onClick:t[0]||(t[0]=l=>s.$router.push("/wishes"))},{default:e(()=>t[4]||(t[4]=[r(" Zobrazit přání ")])),_:1,__:[4]})]),_:1})]),_:1})]),n("div",T,[a(m,{class:"text-center"},{default:e(()=>[a(u,null,{default:e(()=>[a(p,{name:"people",size:"3rem",color:"secondary"}),t[5]||(t[5]=n("div",{class:"text-h6 q-mt-md"},"Přátelé",-1)),n("div",X,o(k.value),1)]),_:1,__:[5]}),a(g,null,{default:e(()=>[a(_,{flat:"",color:"secondary",onClick:t[1]||(t[1]=l=>s.$router.push("/friends"))},{default:e(()=>t[6]||(t[6]=[r(" Spravovat přátele ")])),_:1,__:[6]})]),_:1})]),_:1})]),n("div",G,[a(m,{class:"text-center"},{default:e(()=>[a(u,null,{default:e(()=>[a(p,{name:"notifications",size:"3rem",color:"orange"}),t[7]||(t[7]=n("div",{class:"text-h6 q-mt-md"},"Žádosti",-1)),n("div",H,o(q.value),1)]),_:1,__:[7]}),a(g,null,{default:e(()=>[a(_,{flat:"",color:"orange",onClick:t[2]||(t[2]=l=>s.$router.push("/friends?tab=pending"))},{default:e(()=>t[8]||(t[8]=[r(" Zkontrolovat žádosti ")])),_:1,__:[8]})]),_:1})]),_:1})])]),n("div",J,[t[12]||(t[12]=n("div",{class:"text-h5 q-mb-md"},"Nedávná aktivita",-1)),v.value.length>0?(i(),c(m,{key:0},{default:e(()=>[a(u,null,{default:e(()=>[t[9]||(t[9]=n("div",{class:"text-subtitle1 q-mb-md"},"Nová přání od přátel",-1)),a(L,null,{default:e(()=>[(i(!0),R(P,null,B(v.value,l=>(i(),c(F,{key:l.id},{default:e(()=>[a(x,{avatar:""},{default:e(()=>[a(S,{color:"primary","text-color":"white"},{default:e(()=>[r(o(z(l.created_for_user)),1)]),_:2},1024)]),_:2},1024),a(x,null,{default:e(()=>[a(y,null,{default:e(()=>[r(o(l.name),1)]),_:2},1024),a(y,{caption:""},{default:e(()=>[r(o(A(l.created_for_user)),1)]),_:2},1024)]),_:2},1024),a(x,{side:""},{default:e(()=>[a(y,{caption:""},{default:e(()=>[r(o(D(l.created_at)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[9]})]),_:1})):(i(),c(m,{key:1,class:"text-center q-py-lg"},{default:e(()=>[a(u,null,{default:e(()=>[a(p,{name:"info",size:"3rem",color:"grey-5"}),t[10]||(t[10]=n("div",{class:"text-h6 q-mt-md text-grey-6"},"Žádná nedávná aktivita",-1)),t[11]||(t[11]=n("div",{class:"text-body2 text-grey-6"},"Přidejte si přátele a začněte sdílet přání!",-1))]),_:1,__:[10,11]})]),_:1}))])]),_:1,__:[13]}))}});export{dt as default};
