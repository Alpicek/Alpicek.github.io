import{s as F,v,x as S,y as K,z as pt,A as Xe,B as Y,r as k,C as wt,D as _t,E as C,m as ie,p as I,j as ee,F as fe,G as Te,H as R,I as me,J as ze,K as qt,L as Ye,M as qe,N as G,O as Se,P as X,R as ue,S as xe,T as Ie,U as St,V as Ct,W as kt,X as Ze,Y as Bt,Z as Je,_ as xt,$ as $t,a0 as Lt,a1 as Dt,a2 as Ve,a3 as le,a4 as He,a5 as Ge,a6 as Tt,a7 as zt,a8 as Et,a9 as Pt,aa as At,ab as Ot,ac as Ce,ad as Mt,b as ce,ae as Qt,af as It,ag as Vt,ah as Ht,ai as Nt,a as Ee,n as V,o as Q,w as h,e as f,aj as Ne,ak as M,al as Rt,am as Ft,an as ae,g as et,t as O,u as Wt,c as jt,k as $,ao as Kt}from"./index-DXWY3Ptu.js";import{Q as N,a as D,b as oe}from"./QItem-BiHcezxk.js";import{Q as $e}from"./QList-Dq6IlDDb.js";import{Q as Ut}from"./QBtnGroup-DmifwTch.js";import{Q as Xt,b as de}from"./format-B8XRiPyE.js";import{Q as Le,g as Re,s as Fe}from"./touch-MMzWyBgm.js";import{c as Yt}from"./selection-pUBbCuen.js";import{u as tt}from"./use-quasar-DQXJwWie.js";import{u as Zt}from"./auth-store-CmGdf3qC.js";import{u as nt}from"./usePushNotifications-DJjOURnJ.js";import{u as Pe}from"./vue-i18n.runtime-6hTAqrqs.js";import"./supabase-DuJsgVtx.js";const Jt=F({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:a}){const o=v(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>S("div",{class:o.value},K(a.default))}}),Gt=Object.keys(Xe);function en(e){return Gt.reduce((a,o)=>{const i=e[o];return i!==void 0&&(a[o]=i),a},{})}const at=F({name:"QBtnDropdown",props:{...Xe,...pt,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:o}){const{proxy:i}=Y(),t=k(e.modelValue),n=k(null),l=wt(),d=v(()=>{const c={"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":l.value,"aria-label":e.toggleAriaLabel||i.$q.lang.label[t.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(c["aria-disabled"]="true"),c}),g=v(()=>"q-btn-dropdown__arrow"+(t.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=v(()=>_t(e)),s=v(()=>en(e));C(()=>e.modelValue,c=>{n.value?.[c?"show":"hide"]()}),C(()=>e.split,x);function q(c){t.value=!0,o("beforeShow",c)}function b(c){o("show",c),o("update:modelValue",!0)}function p(c){t.value=!1,o("beforeHide",c)}function m(c){o("hide",c),o("update:modelValue",!1)}function T(c){o("click",c)}function B(c){fe(c),x(),o("click",c)}function _(c){n.value?.toggle(c)}function y(c){n.value?.show(c)}function x(c){n.value?.hide(c)}return Object.assign(i,{show:y,hide:x,toggle:_}),ie(()=>{e.modelValue===!0&&y()}),()=>{const c=[S(I,{class:g.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&c.push(S(Xt,{ref:n,id:l.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:q,onShow:b,onBeforeHide:p,onHide:m},a.default)),e.split===!1?S(ee,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:T},{default:()=>K(a.label,[]).concat(c),loading:a.loading}):S(Ut,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[S(ee,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:B},{default:a.label,loading:a.loading}),S(ee,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...d.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>c)])}}}),tn=F({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:a}){const o=v(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>S("div",{class:o.value,role:"toolbar"},K(a.default))}}),nn=F({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:o}){const{proxy:{$q:i}}=Y(),t=Te(me,R);if(t===R)return console.error("QHeader needs to be child of QLayout"),R;const n=k(parseInt(e.heightHint,10)),l=k(!0),d=v(()=>e.reveal===!0||t.view.value.indexOf("H")!==-1||i.platform.is.ios&&t.isContainer.value===!0),g=v(()=>{if(e.modelValue!==!0)return 0;if(d.value===!0)return l.value===!0?n.value:0;const y=n.value-t.scroll.value.position;return y>0?y:0}),u=v(()=>e.modelValue!==!0||d.value===!0&&l.value!==!0),s=v(()=>e.modelValue===!0&&u.value===!0&&e.reveal===!0),q=v(()=>"q-header q-layout__section--marginal "+(d.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),b=v(()=>{const y=t.rows.value.top,x={};return y[0]==="l"&&t.left.space===!0&&(x[i.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),y[2]==="r"&&t.right.space===!0&&(x[i.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),x});function p(y,x){t.update("header",y,x)}function m(y,x){y.value!==x&&(y.value=x)}function T({height:y}){m(n,y),p("size",y)}function B(y){s.value===!0&&m(l,!0),o("focusin",y)}C(()=>e.modelValue,y=>{p("space",y),m(l,!0),t.animate()}),C(g,y=>{p("offset",y)}),C(()=>e.reveal,y=>{y===!1&&m(l,e.modelValue)}),C(l,y=>{t.animate(),o("reveal",y)}),C(t.scroll,y=>{e.reveal===!0&&m(l,y.direction==="up"||y.position<=e.revealOffset||y.position-y.inflectionPoint<100)});const _={};return t.instances.header=_,e.modelValue===!0&&p("size",n.value),p("space",e.modelValue),p("offset",g.value),ze(()=>{t.instances.header===_&&(t.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const y=qt(a.default,[]);return e.elevated===!0&&y.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),y.push(S(Le,{debounce:0,onResize:T})),S("header",{class:q.value,style:b.value,onFocusin:B},y)}}});function ke(e,a,o){const i=xe(e);let t,n=i.left-a.event.x,l=i.top-a.event.y,d=Math.abs(n),g=Math.abs(l);const u=a.direction;u.horizontal===!0&&u.vertical!==!0?t=n<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?t=l<0?"up":"down":u.up===!0&&l<0?(t="up",d>g&&(u.left===!0&&n<0?t="left":u.right===!0&&n>0&&(t="right"))):u.down===!0&&l>0?(t="down",d>g&&(u.left===!0&&n<0?t="left":u.right===!0&&n>0&&(t="right"))):u.left===!0&&n<0?(t="left",d<g&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down"))):u.right===!0&&n>0&&(t="right",d<g&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down")));let s=!1;if(t===void 0&&o===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,s=!0,t==="left"||t==="right"?(i.left-=n,d=0,n=0):(i.top-=l,g=0,l=0)}return{synthetic:s,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:i,direction:t,isFirst:a.event.isFirst,isFinal:o===!0,duration:Date.now()-a.event.time,distance:{x:d,y:g},offset:{x:n,y:l},delta:{x:i.left-a.event.lastX,y:i.top-a.event.lastY}}}}let an=0;const Be=Ye({name:"touch-pan",beforeMount(e,{value:a,modifiers:o}){if(o.mouse!==!0&&G.has.touch!==!0)return;function i(n,l){o.mouse===!0&&l===!0?Ct(n):(o.stop===!0&&fe(n),o.prevent===!0&&Ie(n))}const t={uid:"qvtp_"+an++,handler:a,modifiers:o,direction:Re(o),noop:X,mouseStart(n){Fe(n,t)&&St(n)&&(ue(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(n,!0))},touchStart(n){if(Fe(n,t)){const l=n.target;ue(t,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","passiveCapture"],[l,"touchend","end","passiveCapture"]]),t.start(n)}},start(n,l){if(G.is.firefox===!0&&Se(e,!0),t.lastEvt=n,l===!0||o.stop===!0){if(t.direction.all!==!0&&(l!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const u=n.type.indexOf("mouse")!==-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&Ie(u),n.cancelBubble===!0&&fe(u),Object.assign(u,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[t.uid]:n.qClonedBy.concat(t.uid)}),t.initialEvent={target:n.target,event:u}}fe(n)}const{left:d,top:g}=xe(n);t.event={x:d,y:g,time:Date.now(),mouse:l===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:g}},move(n){if(t.event===void 0)return;const l=xe(n),d=l.left-t.event.x,g=l.top-t.event.y;if(d===0&&g===0)return;t.lastEvt=n;const u=t.event.mouse===!0,s=()=>{i(n,u);let p;o.preserveCursor!==!0&&o.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Yt(),t.styleCleanup=m=>{if(t.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),u===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};m!==void 0?setTimeout(()=>{T(),m()},50):T()}else m!==void 0&&m()}};if(t.event.detected===!0){t.event.isFirst!==!0&&i(n,t.event.mouse);const{payload:p,synthetic:m}=ke(n,t,!1);p!==void 0&&(t.handler(p)===!1?t.end(n):(t.styleCleanup===void 0&&t.event.isFirst===!0&&s(),t.event.lastX=p.position.left,t.event.lastY=p.position.top,t.event.lastDir=m===!0?void 0:p.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||u===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){s(),t.event.detected=!0,t.move(n);return}const q=Math.abs(d),b=Math.abs(g);q!==b&&(t.direction.horizontal===!0&&q>b||t.direction.vertical===!0&&q<b||t.direction.up===!0&&q<b&&g<0||t.direction.down===!0&&q<b&&g>0||t.direction.left===!0&&q>b&&d<0||t.direction.right===!0&&q>b&&d>0?(t.event.detected=!0,t.move(n)):t.end(n,!0))},end(n,l){if(t.event!==void 0){if(qe(t,"temp"),G.is.firefox===!0&&Se(e,!1),l===!0)t.styleCleanup?.(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(ke(n===void 0?t.lastEvt:n,t).payload);const{payload:d}=ke(n===void 0?t.lastEvt:n,t,!0),g=()=>{t.handler(d)};t.styleCleanup!==void 0?t.styleCleanup(g):g()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,o.mouse===!0){const n=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ue(t,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}G.has.touch===!0&&ue(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const o=e.__qtouchpan;o!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&o.end(),o.handler=a.value),o.direction=Re(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),qe(a,"main"),qe(a,"temp"),G.is.firefox===!0&&Se(e,!1),a.styleCleanup?.(),delete e.__qtouchpan)}}),We=150,on=F({name:"QDrawer",inheritAttrs:!1,props:{...Bt,...Ze,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...kt,"onLayout","miniState"],setup(e,{slots:a,emit:o,attrs:i}){const t=Y(),{proxy:{$q:n}}=t,l=Je(e,n),{preventBodyScroll:d}=Dt(),{registerTimeout:g,removeTimeout:u}=xt(),s=Te(me,R);if(s===R)return console.error("QDrawer needs to be child of QLayout"),R;let q,b=null,p;const m=k(e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint),T=v(()=>e.mini===!0&&m.value!==!0),B=v(()=>T.value===!0?e.miniWidth:e.width),_=k(e.showIfAbove===!0&&m.value===!1?!0:e.modelValue===!0),y=v(()=>e.persistent!==!0&&(m.value===!0||lt.value===!0));function x(r,w){if(P(),r!==!1&&s.animate(),A(0),m.value===!0){const E=s.instances[re.value];E?.belowBreakpoint===!0&&E.hide(!1),W(1),s.isContainer.value!==!0&&d(!0)}else W(0),r!==!1&&pe(!1);g(()=>{r!==!1&&pe(!0),w!==!0&&o("show",r)},We)}function c(r,w){te(),r!==!1&&s.animate(),W(0),A(Z.value*B.value),we(),w!==!0?g(()=>{o("hide",r)},We):u()}const{show:L,hide:z}=$t({showing:_,hideOnRouteChange:y,handleShow:x,handleHide:c}),{addToHistory:P,removeFromHistory:te}=Lt(_,z,y),U={belowBreakpoint:m,hide:z},H=v(()=>e.side==="right"),Z=v(()=>(n.lang.rtl===!0?-1:1)*(H.value===!0?1:-1)),Ae=k(0),J=k(!1),he=k(!1),Oe=k(B.value*Z.value),re=v(()=>H.value===!0?"left":"right"),ge=v(()=>_.value===!0&&m.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:B.value:0),be=v(()=>e.overlay===!0||e.miniToOverlay===!0||s.view.value.indexOf(H.value?"R":"L")!==-1||n.platform.is.ios===!0&&s.isContainer.value===!0),ne=v(()=>e.overlay===!1&&_.value===!0&&m.value===!1),lt=v(()=>e.overlay===!0&&_.value===!0&&m.value===!1),it=v(()=>"fullscreen q-drawer__backdrop"+(_.value===!1&&J.value===!1?" hidden":"")),rt=v(()=>({backgroundColor:`rgba(0,0,0,${Ae.value*.4})`})),Me=v(()=>H.value===!0?s.rows.value.top[2]==="r":s.rows.value.top[0]==="l"),st=v(()=>H.value===!0?s.rows.value.bottom[2]==="r":s.rows.value.bottom[0]==="l"),ut=v(()=>{const r={};return s.header.space===!0&&Me.value===!1&&(be.value===!0?r.top=`${s.header.offset}px`:s.header.space===!0&&(r.top=`${s.header.size}px`)),s.footer.space===!0&&st.value===!1&&(be.value===!0?r.bottom=`${s.footer.offset}px`:s.footer.space===!0&&(r.bottom=`${s.footer.size}px`)),r}),ct=v(()=>{const r={width:`${B.value}px`,transform:`translateX(${Oe.value}px)`};return m.value===!0?r:Object.assign(r,ut.value)}),dt=v(()=>"q-drawer__content fit "+(s.isContainer.value!==!0?"scroll":"overflow-auto")),ft=v(()=>`q-drawer q-drawer--${e.side}`+(he.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(l.value===!0?" q-drawer--dark q-dark":"")+(J.value===!0?" no-transition":_.value===!0?"":" q-layout--prevent-focus")+(m.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${T.value===!0?"mini":"standard"}`+(be.value===!0||ne.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Me.value===!0?" q-drawer--top-padding":""))),vt=v(()=>{const r=n.lang.rtl===!0?e.side:re.value;return[[Be,bt,void 0,{[r]:!0,mouse:!0}]]}),mt=v(()=>{const r=n.lang.rtl===!0?re.value:e.side;return[[Be,Qe,void 0,{[r]:!0,mouse:!0}]]}),ht=v(()=>{const r=n.lang.rtl===!0?re.value:e.side;return[[Be,Qe,void 0,{[r]:!0,mouse:!0,mouseAllDir:!0}]]});function ye(){yt(m,e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint)}C(m,r=>{r===!0?(q=_.value,_.value===!0&&z(!1)):e.overlay===!1&&e.behavior!=="mobile"&&q!==!1&&(_.value===!0?(A(0),W(0),we()):L(!1))}),C(()=>e.side,(r,w)=>{s.instances[w]===U&&(s.instances[w]=void 0,s[w].space=!1,s[w].offset=0),s.instances[r]=U,s[r].size=B.value,s[r].space=ne.value,s[r].offset=ge.value}),C(s.totalWidth,()=>{(s.isContainer.value===!0||document.qScrollPrevented!==!0)&&ye()}),C(()=>e.behavior+e.breakpoint,ye),C(s.isContainer,r=>{_.value===!0&&d(r!==!0),r===!0&&ye()}),C(s.scrollbarWidth,()=>{A(_.value===!0?0:void 0)}),C(ge,r=>{j("offset",r)}),C(ne,r=>{o("onLayout",r),j("space",r)}),C(H,()=>{A()}),C(B,r=>{A(),_e(e.miniToOverlay,r)}),C(()=>e.miniToOverlay,r=>{_e(r,B.value)}),C(()=>n.lang.rtl,()=>{A()}),C(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(gt(),s.animate())}),C(T,r=>{o("miniState",r)});function A(r){r===void 0?Ve(()=>{r=_.value===!0?0:B.value,A(Z.value*r)}):(s.isContainer.value===!0&&H.value===!0&&(m.value===!0||Math.abs(r)===B.value)&&(r+=Z.value*s.scrollbarWidth.value),Oe.value=r)}function W(r){Ae.value=r}function pe(r){const w=r===!0?"remove":s.isContainer.value!==!0?"add":"";w!==""&&document.body.classList[w]("q-body--drawer-toggle")}function gt(){b!==null&&clearTimeout(b),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),he.value=!0,b=setTimeout(()=>{b=null,he.value=!1,t?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function bt(r){if(_.value!==!1)return;const w=B.value,E=de(r.distance.x,0,w);if(r.isFinal===!0){E>=Math.min(75,w)===!0?L():(s.animate(),W(0),A(Z.value*w)),J.value=!1;return}A((n.lang.rtl===!0?H.value!==!0:H.value)?Math.max(w-E,0):Math.min(0,E-w)),W(de(E/w,0,1)),r.isFirst===!0&&(J.value=!0)}function Qe(r){if(_.value!==!0)return;const w=B.value,E=r.direction===e.side,se=(n.lang.rtl===!0?E!==!0:E)?de(r.distance.x,0,w):0;if(r.isFinal===!0){Math.abs(se)<Math.min(75,w)===!0?(s.animate(),W(1),A(0)):z(),J.value=!1;return}A(Z.value*se),W(de(1-se/w,0,1)),r.isFirst===!0&&(J.value=!0)}function we(){d(!1),pe(!0)}function j(r,w){s.update(e.side,r,w)}function yt(r,w){r.value!==w&&(r.value=w)}function _e(r,w){j("size",r===!0?e.miniWidth:w)}return s.instances[e.side]=U,_e(e.miniToOverlay,B.value),j("space",ne.value),j("offset",ge.value),e.showIfAbove===!0&&e.modelValue!==!0&&_.value===!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",!0),ie(()=>{o("onLayout",ne.value),o("miniState",T.value),q=e.showIfAbove===!0;const r=()=>{(_.value===!0?x:c)(!1,!0)};if(s.totalWidth.value!==0){Ve(r);return}p=C(s.totalWidth,()=>{p(),p=void 0,_.value===!1&&e.showIfAbove===!0&&m.value===!1?L(!1):r()})}),ze(()=>{p?.(),b!==null&&(clearTimeout(b),b=null),_.value===!0&&we(),s.instances[e.side]===U&&(s.instances[e.side]=void 0,j("size",0),j("offset",0),j("space",!1))}),()=>{const r=[];m.value===!0&&(e.noSwipeOpen===!1&&r.push(le(S("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),vt.value)),r.push(He("div",{ref:"backdrop",class:it.value,style:rt.value,"aria-hidden":"true",onClick:z},void 0,"backdrop",e.noSwipeBackdrop!==!0&&_.value===!0,()=>ht.value)));const w=T.value===!0&&a.mini!==void 0,E=[S("div",{...i,key:""+w,class:[dt.value,i.class]},w===!0?a.mini():K(a.default))];return e.elevated===!0&&_.value===!0&&E.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),r.push(He("aside",{ref:"content",class:ft.value,style:ct.value},E,"contentclose",e.noSwipeClose!==!0&&m.value===!0,()=>mt.value)),S("div",{class:"q-drawer-container"},r)}}}),ln=F({name:"QPageContainer",setup(e,{slots:a}){const{proxy:{$q:o}}=Y(),i=Te(me,R);if(i===R)return console.error("QPageContainer needs to be child of QLayout"),R;Ge(Tt,!0);const t=v(()=>{const n={};return i.header.space===!0&&(n.paddingTop=`${i.header.size}px`),i.right.space===!0&&(n[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${i.right.size}px`),i.footer.space===!0&&(n.paddingBottom=`${i.footer.size}px`),i.left.space===!0&&(n[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${i.left.size}px`),n});return()=>S("div",{class:"q-page-container",style:t.value},K(a.default))}}),{passive:je}=zt,rn=["both","horizontal","vertical"],sn=F({name:"QScrollObserver",props:{axis:{type:String,validator:e=>rn.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:Et},emits:["scroll"],setup(e,{emit:a}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let i=null,t,n;C(()=>e.scrollTarget,()=>{g(),d()});function l(){i?.();const q=Math.max(0,At(t)),b=Ot(t),p={top:q-o.position.top,left:b-o.position.left};if(e.axis==="vertical"&&p.top===0||e.axis==="horizontal"&&p.left===0)return;const m=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";o.position={top:q,left:b},o.directionChanged=o.direction!==m,o.delta=p,o.directionChanged===!0&&(o.direction=m,o.inflectionPoint=o.position),a("scroll",{...o})}function d(){t=Pt(n,e.scrollTarget),t.addEventListener("scroll",u,je),u(!0)}function g(){t!==void 0&&(t.removeEventListener("scroll",u,je),t=void 0)}function u(q){if(q===!0||e.debounce===0||e.debounce==="0")l();else if(i===null){const[b,p]=e.debounce?[setTimeout(l,e.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];i=()=>{p(b),i=null}}}const{proxy:s}=Y();return C(()=>s.$q.lang.rtl,l),ie(()=>{n=s.$el.parentNode,d()}),ze(()=>{i?.(),g()}),Object.assign(s,{trigger:u,getPosition:()=>o}),X}}),un=F({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:a,emit:o}){const{proxy:{$q:i}}=Y(),t=k(null),n=k(i.screen.height),l=k(e.container===!0?0:i.screen.width),d=k({position:0,direction:"down",inflectionPoint:0}),g=k(0),u=k(Mt.value===!0?0:Ce()),s=v(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),q=v(()=>e.container===!1?{minHeight:i.screen.height+"px"}:null),b=v(()=>u.value!==0?{[i.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),p=v(()=>u.value!==0?{[i.lang.rtl===!0?"right":"left"]:0,[i.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function m(c){if(e.container===!0||document.qScrollPrevented!==!0){const L={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};d.value=L,e.onScroll!==void 0&&o("scroll",L)}}function T(c){const{height:L,width:z}=c;let P=!1;n.value!==L&&(P=!0,n.value=L,e.onScrollHeight!==void 0&&o("scrollHeight",L),_()),l.value!==z&&(P=!0,l.value=z),P===!0&&e.onResize!==void 0&&o("resize",c)}function B({height:c}){g.value!==c&&(g.value=c,_())}function _(){if(e.container===!0){const c=n.value>g.value?Ce():0;u.value!==c&&(u.value=c)}}let y=null;const x={instances:{},view:v(()=>e.view),isContainer:v(()=>e.container),rootRef:t,height:n,containerHeight:g,scrollbarWidth:u,totalWidth:v(()=>l.value+u.value),rows:v(()=>{const c=e.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:ce({size:0,offset:0,space:!1}),right:ce({size:300,offset:0,space:!1}),footer:ce({size:0,offset:0,space:!1}),left:ce({size:300,offset:0,space:!1}),scroll:d,animate(){y!==null?clearTimeout(y):document.body.classList.add("q-body--layout-animate"),y=setTimeout(()=>{y=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,L,z){x[c][L]=z}};if(Ge(me,x),Ce()>0){let c=function(){P=null,te.classList.remove("hide-scrollbar")},L=function(){if(P===null){if(te.scrollHeight>i.screen.height)return;te.classList.add("hide-scrollbar")}else clearTimeout(P);P=setTimeout(c,300)},z=function(U){P!==null&&U==="remove"&&(clearTimeout(P),c()),window[`${U}EventListener`]("resize",L)},P=null;const te=document.body;C(()=>e.container!==!0?"add":"remove",z),e.container!==!0&&z("add"),Qt(()=>{z("remove")})}return()=>{const c=It(a.default,[S(sn,{onScroll:m}),S(Le,{onResize:T})]),L=S("div",{class:s.value,style:q.value,ref:e.container===!0?void 0:t,tabindex:-1},c);return e.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:t},[S(Le,{onResize:B}),S("div",{class:"absolute-full",style:b.value},[S("div",{class:"scroll",style:p.value},[L])])]):L}}});function Ke(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const ve=Ye({name:"close-popup",beforeMount(e,{value:a}){const o={depth:Ke(a),handler(i){o.depth!==0&&setTimeout(()=>{const t=Ht(e);t!==void 0&&Nt(t,i,o.depth)})},handlerKey(i){Vt(i,13)===!0&&o.handler(i)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:a,oldValue:o}){a!==o&&(e.__qclosepopup.depth=Ke(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),cn=Ee({__name:"LanguageSwitcher",setup(e){const{locale:a}=Pe(),o=v(()=>a.value),i=v(()=>{switch(o.value){case"cs_CZ":return"Čeština";case"en_US":return"English";default:return"Language"}}),t=n=>{a.value=n,localStorage.setItem("darkovnicek-language",n)};return(n,l)=>(Q(),V(at,{flat:"",dense:"",label:i.value,icon:"language"},{default:h(()=>[f($e,null,{default:h(()=>[le((Q(),V(N,{clickable:"",onClick:l[0]||(l[0]=d=>t("cs_CZ")),class:Ne({"bg-primary text-white":o.value==="cs_CZ"})},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"flag"})]),_:1}),f(D,null,{default:h(()=>[f(oe,null,{default:h(()=>l[2]||(l[2]=[M("Čeština")])),_:1,__:[2]})]),_:1})]),_:1},8,["class"])),[[ve]]),le((Q(),V(N,{clickable:"",onClick:l[1]||(l[1]=d=>t("en_US")),class:Ne({"bg-primary text-white":o.value==="en_US"})},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"flag"})]),_:1}),f(D,null,{default:h(()=>[f(oe,null,{default:h(()=>l[3]||(l[3]=[M("English")])),_:1,__:[3]})]),_:1})]),_:1},8,["class"])),[[ve]])]),_:1})]),_:1},8,["label"]))}}),dn=F({name:"QBanner",props:{...Ze,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:a}){const{proxy:{$q:o}}=Y(),i=Je(e,o),t=v(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(i.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),n=v(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const l=[S("div",{class:"q-banner__avatar col-auto row items-center self-start"},K(a.avatar)),S("div",{class:"q-banner__content col text-body2"},K(a.default))],d=K(a.action);return d!==void 0&&l.push(S("div",{class:n.value},d)),S("div",{class:t.value+(e.inlineActions===!1&&d!==void 0?" q-banner--top-padding":""),role:"alert"},l)}}});function fn(e){return Rt(e)===!0?"__q_date|"+e.getTime():Ft(e)===!0?"__q_expr|"+e.source:typeof e=="number"?"__q_numb|"+e:typeof e=="boolean"?"__q_bool|"+(e?"1":"0"):typeof e=="string"?"__q_strn|"+e:typeof e=="function"?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e}function vn(e){if(e.length<9)return e;const o=e.substring(0,8),i=e.substring(9);switch(o){case"__q_date":const t=Number(i);return new Date(Number.isNaN(t)===!0?i:t);case"__q_expr":return new RegExp(i);case"__q_numb":return Number(i);case"__q_bool":return i==="1";case"__q_strn":return""+i;case"__q_objt":return JSON.parse(i);default:return e}}function mn(){const e=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:X,setItem:X,remove:X,removeItem:X,clear:X,isEmpty:()=>!0}}function hn(e){const a=window[e+"Storage"],o=l=>{const d=a.getItem(l);return d?vn(d):null},i=l=>a.getItem(l)!==null,t=(l,d)=>{a.setItem(l,fn(d))},n=l=>{a.removeItem(l)};return{has:i,hasItem:i,getLength:()=>a.length,getItem:o,getIndex:l=>l<a.length?o(a.key(l)):null,getKey:l=>l<a.length?a.key(l):null,getAll:()=>{let l;const d={},g=a.length;for(let u=0;u<g;u++)l=a.key(u),d[l]=o(l);return d},getAllKeys:()=>{const l=[],d=a.length;for(let g=0;g<d;g++)l.push(a.key(g));return l},set:t,setItem:t,remove:n,removeItem:n,clear:()=>{a.clear()},isEmpty:()=>a.length===0}}const ot=G.has.webStorage===!1?mn():hn("local"),De={install({$q:e}){e.localStorage=ot}};Object.assign(De,ot);const gn={class:"text-body2"},Ue="push-notification-banner-dismissed",bn=Ee({__name:"PushNotificationBanner",setup(e){const a=tt(),{t:o}=Pe(),i=nt(),t=k(!1),n=k(!1),l=v(()=>i.isSupported.value&&!i.isSubscribed.value&&!n.value&&i.permission.value!=="denied"),d=async()=>{t.value=!0;try{await i.subscribe()}catch(u){console.error("Error enabling notifications:",u)}finally{t.value=!1}},g=()=>{n.value=!0,De.set(Ue,!0),a.notify({type:"info",message:o("notifications.bannerDismissed"),timeout:2e3})};return ie(async()=>{await i.initialize(),n.value=De.getItem(Ue)===!0}),(u,s)=>l.value?(Q(),V(dn,{key:0,class:"bg-primary text-white q-mb-md",dense:"",rounded:""},{avatar:h(()=>[f(I,{name:"notifications"})]),action:h(()=>[f(ee,{flat:"",dense:"",label:u.$t("notifications.enable"),onClick:d,loading:t.value,"text-color":"white",class:"q-mr-sm"},null,8,["label","loading"]),f(ee,{flat:"",dense:"",label:u.$t("common.close"),onClick:g,"text-color":"white",icon:"close",size:"sm"},null,8,["label"])]),default:h(()=>[et("div",gn,O(u.$t("notifications.bannerMessage")),1)]),_:1})):ae("",!0)}}),yn={key:0,class:"row items-center q-gutter-xs"},pn={class:"text-body2 text-white"},En=Ee({__name:"MainLayout",setup(e){const a=Wt(),o=tt(),{t:i}=Pe(),t=Zt(),n=nt(),l=k(!1),d=k(!1),g=()=>{l.value=!l.value},u=()=>t.profile?t.profile.name&&t.profile.surname?`${t.profile.name} ${t.profile.surname}`:t.profile.name?t.profile.name:t.profile.username?t.profile.username:"":"",s=async()=>{(await t.signOut()).error?o.notify({type:"negative",message:i("auth.logoutError")}):(o.notify({type:"positive",message:i("auth.logoutSuccess")}),a.push("/auth")),d.value=!1};return ie(async()=>{await t.initializeAuth();try{await n.initialize()}catch(q){console.log("Push notifications not available:",q)}t.isAuthenticated||a.push("/auth")}),(q,b)=>{const p=Kt("router-view");return Q(),V(un,{view:"lHh Lpr lFf"},{default:h(()=>[f(nn,{elevated:""},{default:h(()=>[f(tn,null,{default:h(()=>[f(ee,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:g}),f(Jt,null,{default:h(()=>[M(O($(i)("app.title")),1)]),_:1}),f(cn),$(t).isAuthenticated?(Q(),jt("div",yn,[f(I,{name:"account_circle",size:"md",color:"white"}),et("span",pn,O(u()),1),f(at,{flat:"",dense:"","no-icon-animation":"","dropdown-icon":"expand_more",onClick:b[1]||(b[1]=m=>d.value=!d.value)},{default:h(()=>[f($e,null,{default:h(()=>[le((Q(),V(N,{clickable:"",onClick:b[0]||(b[0]=m=>$(a).push("/profile"))},{default:h(()=>[f(D,null,{default:h(()=>[f(oe,null,{default:h(()=>[M(O($(i)("nav.profile")),1)]),_:1})]),_:1})]),_:1})),[[ve]]),le((Q(),V(N,{clickable:"",onClick:s},{default:h(()=>[f(D,null,{default:h(()=>[f(oe,null,{default:h(()=>[M(O($(i)("nav.logout")),1)]),_:1})]),_:1})]),_:1})),[[ve]])]),_:1})]),_:1})])):ae("",!0)]),_:1})]),_:1}),$(t).isAuthenticated?(Q(),V(on,{key:0,modelValue:l.value,"onUpdate:modelValue":b[7]||(b[7]=m=>l.value=m),"show-if-above":"",bordered:""},{default:h(()=>[f($e,null,{default:h(()=>[f(oe,{header:""},{default:h(()=>[M(O($(i)("nav.menu")),1)]),_:1}),f(N,{clickable:"",onClick:b[2]||(b[2]=m=>$(a).push("/"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"home"})]),_:1}),f(D,null,{default:h(()=>[M(O($(i)("nav.home")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[3]||(b[3]=m=>$(a).push("/wishes"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"card_giftcard"})]),_:1}),f(D,null,{default:h(()=>[M(O(q.$t("nav.wishes")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[4]||(b[4]=m=>$(a).push("/friends"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"people"})]),_:1}),f(D,null,{default:h(()=>[M(O($(i)("nav.friends")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[5]||(b[5]=m=>$(a).push("/groups"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"group"})]),_:1}),f(D,null,{default:h(()=>[M(O($(i)("nav.groups")),1)]),_:1})]),_:1}),$(t).profile?.is_admin?(Q(),V(N,{key:0,clickable:"",onClick:b[6]||(b[6]=m=>$(a).push("/notifications"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(I,{name:"notifications"})]),_:1}),f(D,null,{default:h(()=>[M(O($(i)("nav.notifications")),1)]),_:1})]),_:1})):ae("",!0)]),_:1})]),_:1},8,["modelValue"])):ae("",!0),f(ln,null,{default:h(()=>[$(t).isAuthenticated?(Q(),V(bn,{key:0})):ae("",!0),f(p)]),_:1})]),_:1})}}});export{En as default};
