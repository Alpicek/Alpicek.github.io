import{l as V,m as v,n as q,p as F,q as Xe,s as Y,r as k,v as yt,x as C,h as le,j as Q,Q as ee,y as de,z as Te,A as W,B as me,C as ze,D as wt,E as Ye,F as qe,G as J,H as Se,I as X,J as se,K as xe,L as Ie,M as _t,N as qt,O as Ve,P as oe,R as He,S as Ze,T as St,U as Ct,V as kt,b as ue,W as Bt,X as xt,Y as $t,a as Ee,i as R,o as I,w as h,e as f,Z as Ne,_ as M,$ as Lt,a0 as Dt,a1 as fe,f as Ge,t as O,u as Tt,c as zt,g as L,a2 as Et}from"./index-MmE2OoPn.js";import{Q as N,a as D,b as ae}from"./QItem-CY0cJLUx.js";import{Q as $e}from"./QList-DPzT32WI.js";import{Q as Pt,b as ce}from"./format-DRKlTVnX.js";import{u as At}from"./focus-manager-B0Knlyhr.js";import{u as Ot,a as Mt,b as Qt,c as It,d as Vt,e as Ht,s as Nt,g as Rt,f as Ft,h as Wt,i as Ce,j as jt,k as Kt}from"./use-prevent-scroll-DwUPBgbf.js";import{Q as Le,g as Re,s as Fe,c as Ut,u as Xt}from"./selection-BoVD1h7V.js";import{u as Je,a as et}from"./use-dark-CpKIw5E7.js";import{u as tt}from"./use-quasar-CdazeEAi.js";import{u as Yt}from"./auth-store-XB83oEbh.js";import{u as nt}from"./usePushNotifications-c8sJjhLS.js";import{u as Pe}from"./vue-i18n.runtime-s6xTsf43.js";import"./supabase-DumeQkYe.js";const Zt=V({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:a}){const o=v(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>q("div",{class:o.value},F(a.default))}}),Gt=V({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:a}){const o=v(()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(t=>e[t]===!0).map(t=>`q-btn-group--${t}`).join(" ");return`q-btn-group row no-wrap${l.length!==0?" "+l:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>q("div",{class:o.value},F(a.default))}}),Jt=Object.keys(Xe);function en(e){return Jt.reduce((a,o)=>{const l=e[o];return l!==void 0&&(a[o]=l),a},{})}const at=V({name:"QBtnDropdown",props:{...Xe,...Ot,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:o}){const{proxy:l}=Y(),t=k(e.modelValue),n=k(null),r=At(),d=v(()=>{const c={"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,"aria-label":e.toggleAriaLabel||l.$q.lang.label[t.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(c["aria-disabled"]="true"),c}),g=v(()=>"q-btn-dropdown__arrow"+(t.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=v(()=>yt(e)),s=v(()=>en(e));C(()=>e.modelValue,c=>{n.value?.[c?"show":"hide"]()}),C(()=>e.split,x);function S(c){t.value=!0,o("beforeShow",c)}function b(c){o("show",c),o("update:modelValue",!0)}function y(c){t.value=!1,o("beforeHide",c)}function m(c){o("hide",c),o("update:modelValue",!1)}function T(c){o("click",c)}function B(c){de(c),x(),o("click",c)}function _(c){n.value?.toggle(c)}function p(c){n.value?.show(c)}function x(c){n.value?.hide(c)}return Object.assign(l,{show:p,hide:x,toggle:_}),le(()=>{e.modelValue===!0&&p()}),()=>{const c=[q(Q,{class:g.value,name:e.dropdownIcon||l.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&c.push(q(Pt,{ref:n,id:r.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:S,onShow:b,onBeforeHide:y,onHide:m},a.default)),e.split===!1?q(ee,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:T},{default:()=>F(a.label,[]).concat(c),loading:a.loading}):q(Gt,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[q(ee,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:B},{default:a.label,loading:a.loading}),q(ee,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...d.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>c)])}}}),tn=V({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:a}){const o=v(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>q("div",{class:o.value,role:"toolbar"},F(a.default))}}),nn=V({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:o}){const{proxy:{$q:l}}=Y(),t=Te(me,W);if(t===W)return console.error("QHeader needs to be child of QLayout"),W;const n=k(parseInt(e.heightHint,10)),r=k(!0),d=v(()=>e.reveal===!0||t.view.value.indexOf("H")!==-1||l.platform.is.ios&&t.isContainer.value===!0),g=v(()=>{if(e.modelValue!==!0)return 0;if(d.value===!0)return r.value===!0?n.value:0;const p=n.value-t.scroll.value.position;return p>0?p:0}),u=v(()=>e.modelValue!==!0||d.value===!0&&r.value!==!0),s=v(()=>e.modelValue===!0&&u.value===!0&&e.reveal===!0),S=v(()=>"q-header q-layout__section--marginal "+(d.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),b=v(()=>{const p=t.rows.value.top,x={};return p[0]==="l"&&t.left.space===!0&&(x[l.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),p[2]==="r"&&t.right.space===!0&&(x[l.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),x});function y(p,x){t.update("header",p,x)}function m(p,x){p.value!==x&&(p.value=x)}function T({height:p}){m(n,p),y("size",p)}function B(p){s.value===!0&&m(r,!0),o("focusin",p)}C(()=>e.modelValue,p=>{y("space",p),m(r,!0),t.animate()}),C(g,p=>{y("offset",p)}),C(()=>e.reveal,p=>{p===!1&&m(r,e.modelValue)}),C(r,p=>{t.animate(),o("reveal",p)}),C(t.scroll,p=>{e.reveal===!0&&m(r,p.direction==="up"||p.position<=e.revealOffset||p.position-p.inflectionPoint<100)});const _={};return t.instances.header=_,e.modelValue===!0&&y("size",n.value),y("space",e.modelValue),y("offset",g.value),ze(()=>{t.instances.header===_&&(t.instances.header=void 0,y("size",0),y("offset",0),y("space",!1))}),()=>{const p=wt(a.default,[]);return e.elevated===!0&&p.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),p.push(q(Le,{debounce:0,onResize:T})),q("header",{class:S.value,style:b.value,onFocusin:B},p)}}});function ke(e,a,o){const l=xe(e);let t,n=l.left-a.event.x,r=l.top-a.event.y,d=Math.abs(n),g=Math.abs(r);const u=a.direction;u.horizontal===!0&&u.vertical!==!0?t=n<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?t=r<0?"up":"down":u.up===!0&&r<0?(t="up",d>g&&(u.left===!0&&n<0?t="left":u.right===!0&&n>0&&(t="right"))):u.down===!0&&r>0?(t="down",d>g&&(u.left===!0&&n<0?t="left":u.right===!0&&n>0&&(t="right"))):u.left===!0&&n<0?(t="left",d<g&&(u.up===!0&&r<0?t="up":u.down===!0&&r>0&&(t="down"))):u.right===!0&&n>0&&(t="right",d<g&&(u.up===!0&&r<0?t="up":u.down===!0&&r>0&&(t="down")));let s=!1;if(t===void 0&&o===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,s=!0,t==="left"||t==="right"?(l.left-=n,d=0,n=0):(l.top-=r,g=0,r=0)}return{synthetic:s,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:l,direction:t,isFirst:a.event.isFirst,isFinal:o===!0,duration:Date.now()-a.event.time,distance:{x:d,y:g},offset:{x:n,y:r},delta:{x:l.left-a.event.lastX,y:l.top-a.event.lastY}}}}let an=0;const Be=Ye({name:"touch-pan",beforeMount(e,{value:a,modifiers:o}){if(o.mouse!==!0&&J.has.touch!==!0)return;function l(n,r){o.mouse===!0&&r===!0?qt(n):(o.stop===!0&&de(n),o.prevent===!0&&Ie(n))}const t={uid:"qvtp_"+an++,handler:a,modifiers:o,direction:Re(o),noop:X,mouseStart(n){Fe(n,t)&&_t(n)&&(se(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(n,!0))},touchStart(n){if(Fe(n,t)){const r=n.target;se(t,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","passiveCapture"],[r,"touchend","end","passiveCapture"]]),t.start(n)}},start(n,r){if(J.is.firefox===!0&&Se(e,!0),t.lastEvt=n,r===!0||o.stop===!0){if(t.direction.all!==!0&&(r!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const u=n.type.indexOf("mouse")!==-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&Ie(u),n.cancelBubble===!0&&de(u),Object.assign(u,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[t.uid]:n.qClonedBy.concat(t.uid)}),t.initialEvent={target:n.target,event:u}}de(n)}const{left:d,top:g}=xe(n);t.event={x:d,y:g,time:Date.now(),mouse:r===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:g}},move(n){if(t.event===void 0)return;const r=xe(n),d=r.left-t.event.x,g=r.top-t.event.y;if(d===0&&g===0)return;t.lastEvt=n;const u=t.event.mouse===!0,s=()=>{l(n,u);let y;o.preserveCursor!==!0&&o.preservecursor!==!0&&(y=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ut(),t.styleCleanup=m=>{if(t.styleCleanup=void 0,y!==void 0&&(document.documentElement.style.cursor=y),document.body.classList.remove("non-selectable"),u===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};m!==void 0?setTimeout(()=>{T(),m()},50):T()}else m!==void 0&&m()}};if(t.event.detected===!0){t.event.isFirst!==!0&&l(n,t.event.mouse);const{payload:y,synthetic:m}=ke(n,t,!1);y!==void 0&&(t.handler(y)===!1?t.end(n):(t.styleCleanup===void 0&&t.event.isFirst===!0&&s(),t.event.lastX=y.position.left,t.event.lastY=y.position.top,t.event.lastDir=m===!0?void 0:y.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||u===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){s(),t.event.detected=!0,t.move(n);return}const S=Math.abs(d),b=Math.abs(g);S!==b&&(t.direction.horizontal===!0&&S>b||t.direction.vertical===!0&&S<b||t.direction.up===!0&&S<b&&g<0||t.direction.down===!0&&S<b&&g>0||t.direction.left===!0&&S>b&&d<0||t.direction.right===!0&&S>b&&d>0?(t.event.detected=!0,t.move(n)):t.end(n,!0))},end(n,r){if(t.event!==void 0){if(qe(t,"temp"),J.is.firefox===!0&&Se(e,!1),r===!0)t.styleCleanup?.(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(ke(n===void 0?t.lastEvt:n,t).payload);const{payload:d}=ke(n===void 0?t.lastEvt:n,t,!0),g=()=>{t.handler(d)};t.styleCleanup!==void 0?t.styleCleanup(g):g()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,o.mouse===!0){const n=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";se(t,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}J.has.touch===!0&&se(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const o=e.__qtouchpan;o!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&o.end(),o.handler=a.value),o.direction=Re(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),qe(a,"main"),qe(a,"temp"),J.is.firefox===!0&&Se(e,!1),a.styleCleanup?.(),delete e.__qtouchpan)}}),We=150,on=V({name:"QDrawer",inheritAttrs:!1,props:{...Qt,...Je,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Mt,"onLayout","miniState"],setup(e,{slots:a,emit:o,attrs:l}){const t=Y(),{proxy:{$q:n}}=t,r=et(e,n),{preventBodyScroll:d}=Ht(),{registerTimeout:g,removeTimeout:u}=Xt(),s=Te(me,W);if(s===W)return console.error("QDrawer needs to be child of QLayout"),W;let S,b=null,y;const m=k(e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint),T=v(()=>e.mini===!0&&m.value!==!0),B=v(()=>T.value===!0?e.miniWidth:e.width),_=k(e.showIfAbove===!0&&m.value===!1?!0:e.modelValue===!0),p=v(()=>e.persistent!==!0&&(m.value===!0||lt.value===!0));function x(i,w){if(P(),i!==!1&&s.animate(),A(0),m.value===!0){const E=s.instances[re.value];E?.belowBreakpoint===!0&&E.hide(!1),j(1),s.isContainer.value!==!0&&d(!0)}else j(0),i!==!1&&ye(!1);g(()=>{i!==!1&&ye(!0),w!==!0&&o("show",i)},We)}function c(i,w){te(),i!==!1&&s.animate(),j(0),A(Z.value*B.value),we(),w!==!0?g(()=>{o("hide",i)},We):u()}const{show:$,hide:z}=It({showing:_,hideOnRouteChange:p,handleShow:x,handleHide:c}),{addToHistory:P,removeFromHistory:te}=Vt(_,z,p),U={belowBreakpoint:m,hide:z},H=v(()=>e.side==="right"),Z=v(()=>(n.lang.rtl===!0?-1:1)*(H.value===!0?1:-1)),Ae=k(0),G=k(!1),he=k(!1),Oe=k(B.value*Z.value),re=v(()=>H.value===!0?"left":"right"),ge=v(()=>_.value===!0&&m.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:B.value:0),be=v(()=>e.overlay===!0||e.miniToOverlay===!0||s.view.value.indexOf(H.value?"R":"L")!==-1||n.platform.is.ios===!0&&s.isContainer.value===!0),ne=v(()=>e.overlay===!1&&_.value===!0&&m.value===!1),lt=v(()=>e.overlay===!0&&_.value===!0&&m.value===!1),rt=v(()=>"fullscreen q-drawer__backdrop"+(_.value===!1&&G.value===!1?" hidden":"")),it=v(()=>({backgroundColor:`rgba(0,0,0,${Ae.value*.4})`})),Me=v(()=>H.value===!0?s.rows.value.top[2]==="r":s.rows.value.top[0]==="l"),st=v(()=>H.value===!0?s.rows.value.bottom[2]==="r":s.rows.value.bottom[0]==="l"),ut=v(()=>{const i={};return s.header.space===!0&&Me.value===!1&&(be.value===!0?i.top=`${s.header.offset}px`:s.header.space===!0&&(i.top=`${s.header.size}px`)),s.footer.space===!0&&st.value===!1&&(be.value===!0?i.bottom=`${s.footer.offset}px`:s.footer.space===!0&&(i.bottom=`${s.footer.size}px`)),i}),ct=v(()=>{const i={width:`${B.value}px`,transform:`translateX(${Oe.value}px)`};return m.value===!0?i:Object.assign(i,ut.value)}),dt=v(()=>"q-drawer__content fit "+(s.isContainer.value!==!0?"scroll":"overflow-auto")),ft=v(()=>`q-drawer q-drawer--${e.side}`+(he.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(r.value===!0?" q-drawer--dark q-dark":"")+(G.value===!0?" no-transition":_.value===!0?"":" q-layout--prevent-focus")+(m.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${T.value===!0?"mini":"standard"}`+(be.value===!0||ne.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Me.value===!0?" q-drawer--top-padding":""))),vt=v(()=>{const i=n.lang.rtl===!0?e.side:re.value;return[[Be,bt,void 0,{[i]:!0,mouse:!0}]]}),mt=v(()=>{const i=n.lang.rtl===!0?re.value:e.side;return[[Be,Qe,void 0,{[i]:!0,mouse:!0}]]}),ht=v(()=>{const i=n.lang.rtl===!0?re.value:e.side;return[[Be,Qe,void 0,{[i]:!0,mouse:!0,mouseAllDir:!0}]]});function pe(){pt(m,e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint)}C(m,i=>{i===!0?(S=_.value,_.value===!0&&z(!1)):e.overlay===!1&&e.behavior!=="mobile"&&S!==!1&&(_.value===!0?(A(0),j(0),we()):$(!1))}),C(()=>e.side,(i,w)=>{s.instances[w]===U&&(s.instances[w]=void 0,s[w].space=!1,s[w].offset=0),s.instances[i]=U,s[i].size=B.value,s[i].space=ne.value,s[i].offset=ge.value}),C(s.totalWidth,()=>{(s.isContainer.value===!0||document.qScrollPrevented!==!0)&&pe()}),C(()=>e.behavior+e.breakpoint,pe),C(s.isContainer,i=>{_.value===!0&&d(i!==!0),i===!0&&pe()}),C(s.scrollbarWidth,()=>{A(_.value===!0?0:void 0)}),C(ge,i=>{K("offset",i)}),C(ne,i=>{o("onLayout",i),K("space",i)}),C(H,()=>{A()}),C(B,i=>{A(),_e(e.miniToOverlay,i)}),C(()=>e.miniToOverlay,i=>{_e(i,B.value)}),C(()=>n.lang.rtl,()=>{A()}),C(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(gt(),s.animate())}),C(T,i=>{o("miniState",i)});function A(i){i===void 0?Ve(()=>{i=_.value===!0?0:B.value,A(Z.value*i)}):(s.isContainer.value===!0&&H.value===!0&&(m.value===!0||Math.abs(i)===B.value)&&(i+=Z.value*s.scrollbarWidth.value),Oe.value=i)}function j(i){Ae.value=i}function ye(i){const w=i===!0?"remove":s.isContainer.value!==!0?"add":"";w!==""&&document.body.classList[w]("q-body--drawer-toggle")}function gt(){b!==null&&clearTimeout(b),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),he.value=!0,b=setTimeout(()=>{b=null,he.value=!1,t?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function bt(i){if(_.value!==!1)return;const w=B.value,E=ce(i.distance.x,0,w);if(i.isFinal===!0){E>=Math.min(75,w)===!0?$():(s.animate(),j(0),A(Z.value*w)),G.value=!1;return}A((n.lang.rtl===!0?H.value!==!0:H.value)?Math.max(w-E,0):Math.min(0,E-w)),j(ce(E/w,0,1)),i.isFirst===!0&&(G.value=!0)}function Qe(i){if(_.value!==!0)return;const w=B.value,E=i.direction===e.side,ie=(n.lang.rtl===!0?E!==!0:E)?ce(i.distance.x,0,w):0;if(i.isFinal===!0){Math.abs(ie)<Math.min(75,w)===!0?(s.animate(),j(1),A(0)):z(),G.value=!1;return}A(Z.value*ie),j(ce(1-ie/w,0,1)),i.isFirst===!0&&(G.value=!0)}function we(){d(!1),ye(!0)}function K(i,w){s.update(e.side,i,w)}function pt(i,w){i.value!==w&&(i.value=w)}function _e(i,w){K("size",i===!0?e.miniWidth:w)}return s.instances[e.side]=U,_e(e.miniToOverlay,B.value),K("space",ne.value),K("offset",ge.value),e.showIfAbove===!0&&e.modelValue!==!0&&_.value===!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",!0),le(()=>{o("onLayout",ne.value),o("miniState",T.value),S=e.showIfAbove===!0;const i=()=>{(_.value===!0?x:c)(!1,!0)};if(s.totalWidth.value!==0){Ve(i);return}y=C(s.totalWidth,()=>{y(),y=void 0,_.value===!1&&e.showIfAbove===!0&&m.value===!1?$(!1):i()})}),ze(()=>{y?.(),b!==null&&(clearTimeout(b),b=null),_.value===!0&&we(),s.instances[e.side]===U&&(s.instances[e.side]=void 0,K("size",0),K("offset",0),K("space",!1))}),()=>{const i=[];m.value===!0&&(e.noSwipeOpen===!1&&i.push(oe(q("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),vt.value)),i.push(He("div",{ref:"backdrop",class:rt.value,style:it.value,"aria-hidden":"true",onClick:z},void 0,"backdrop",e.noSwipeBackdrop!==!0&&_.value===!0,()=>ht.value)));const w=T.value===!0&&a.mini!==void 0,E=[q("div",{...l,key:""+w,class:[dt.value,l.class]},w===!0?a.mini():F(a.default))];return e.elevated===!0&&_.value===!0&&E.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(He("aside",{ref:"content",class:ft.value,style:ct.value},E,"contentclose",e.noSwipeClose!==!0&&m.value===!0,()=>mt.value)),q("div",{class:"q-drawer-container"},i)}}}),ln=V({name:"QPageContainer",setup(e,{slots:a}){const{proxy:{$q:o}}=Y(),l=Te(me,W);if(l===W)return console.error("QPageContainer needs to be child of QLayout"),W;Ze(St,!0);const t=v(()=>{const n={};return l.header.space===!0&&(n.paddingTop=`${l.header.size}px`),l.right.space===!0&&(n[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(n.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(n[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),n});return()=>q("div",{class:"q-page-container",style:t.value},F(a.default))}}),{passive:je}=Ct,rn=["both","horizontal","vertical"],sn=V({name:"QScrollObserver",props:{axis:{type:String,validator:e=>rn.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:Nt},emits:["scroll"],setup(e,{emit:a}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,t,n;C(()=>e.scrollTarget,()=>{g(),d()});function r(){l?.();const S=Math.max(0,Ft(t)),b=Wt(t),y={top:S-o.position.top,left:b-o.position.left};if(e.axis==="vertical"&&y.top===0||e.axis==="horizontal"&&y.left===0)return;const m=Math.abs(y.top)>=Math.abs(y.left)?y.top<0?"up":"down":y.left<0?"left":"right";o.position={top:S,left:b},o.directionChanged=o.direction!==m,o.delta=y,o.directionChanged===!0&&(o.direction=m,o.inflectionPoint=o.position),a("scroll",{...o})}function d(){t=Rt(n,e.scrollTarget),t.addEventListener("scroll",u,je),u(!0)}function g(){t!==void 0&&(t.removeEventListener("scroll",u,je),t=void 0)}function u(S){if(S===!0||e.debounce===0||e.debounce==="0")r();else if(l===null){const[b,y]=e.debounce?[setTimeout(r,e.debounce),clearTimeout]:[requestAnimationFrame(r),cancelAnimationFrame];l=()=>{y(b),l=null}}}const{proxy:s}=Y();return C(()=>s.$q.lang.rtl,r),le(()=>{n=s.$el.parentNode,d()}),ze(()=>{l?.(),g()}),Object.assign(s,{trigger:u,getPosition:()=>o}),X}}),un=V({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:a,emit:o}){const{proxy:{$q:l}}=Y(),t=k(null),n=k(l.screen.height),r=k(e.container===!0?0:l.screen.width),d=k({position:0,direction:"down",inflectionPoint:0}),g=k(0),u=k(kt.value===!0?0:Ce()),s=v(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),S=v(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),b=v(()=>u.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),y=v(()=>u.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function m(c){if(e.container===!0||document.qScrollPrevented!==!0){const $={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};d.value=$,e.onScroll!==void 0&&o("scroll",$)}}function T(c){const{height:$,width:z}=c;let P=!1;n.value!==$&&(P=!0,n.value=$,e.onScrollHeight!==void 0&&o("scrollHeight",$),_()),r.value!==z&&(P=!0,r.value=z),P===!0&&e.onResize!==void 0&&o("resize",c)}function B({height:c}){g.value!==c&&(g.value=c,_())}function _(){if(e.container===!0){const c=n.value>g.value?Ce():0;u.value!==c&&(u.value=c)}}let p=null;const x={instances:{},view:v(()=>e.view),isContainer:v(()=>e.container),rootRef:t,height:n,containerHeight:g,scrollbarWidth:u,totalWidth:v(()=>r.value+u.value),rows:v(()=>{const c=e.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:ue({size:0,offset:0,space:!1}),right:ue({size:300,offset:0,space:!1}),footer:ue({size:0,offset:0,space:!1}),left:ue({size:300,offset:0,space:!1}),scroll:d,animate(){p!==null?clearTimeout(p):document.body.classList.add("q-body--layout-animate"),p=setTimeout(()=>{p=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,$,z){x[c][$]=z}};if(Ze(me,x),Ce()>0){let c=function(){P=null,te.classList.remove("hide-scrollbar")},$=function(){if(P===null){if(te.scrollHeight>l.screen.height)return;te.classList.add("hide-scrollbar")}else clearTimeout(P);P=setTimeout(c,300)},z=function(U){P!==null&&U==="remove"&&(clearTimeout(P),c()),window[`${U}EventListener`]("resize",$)},P=null;const te=document.body;C(()=>e.container!==!0?"add":"remove",z),e.container!==!0&&z("add"),Bt(()=>{z("remove")})}return()=>{const c=xt(a.default,[q(sn,{onScroll:m}),q(Le,{onResize:T})]),$=q("div",{class:s.value,style:S.value,ref:e.container===!0?void 0:t,tabindex:-1},c);return e.container===!0?q("div",{class:"q-layout-container overflow-hidden",ref:t},[q(Le,{onResize:B}),q("div",{class:"absolute-full",style:b.value},[q("div",{class:"scroll",style:y.value},[$])])]):$}}});function Ke(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const ve=Ye({name:"close-popup",beforeMount(e,{value:a}){const o={depth:Ke(a),handler(l){o.depth!==0&&setTimeout(()=>{const t=jt(e);t!==void 0&&Kt(t,l,o.depth)})},handlerKey(l){$t(l,13)===!0&&o.handler(l)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:a,oldValue:o}){a!==o&&(e.__qclosepopup.depth=Ke(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),cn=Ee({__name:"LanguageSwitcher",setup(e){const{locale:a}=Pe(),o=v(()=>a.value),l=v(()=>{switch(o.value){case"cs_CZ":return"Čeština";case"en_US":return"English";default:return"Language"}}),t=n=>{a.value=n,localStorage.setItem("darkovnicek-language",n)};return(n,r)=>(I(),R(at,{flat:"",dense:"",label:l.value,icon:"language"},{default:h(()=>[f($e,null,{default:h(()=>[oe((I(),R(N,{clickable:"",onClick:r[0]||(r[0]=d=>t("cs_CZ")),class:Ne({"bg-primary text-white":o.value==="cs_CZ"})},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"flag"})]),_:1}),f(D,null,{default:h(()=>[f(ae,null,{default:h(()=>r[2]||(r[2]=[M("Čeština")])),_:1,__:[2]})]),_:1})]),_:1},8,["class"])),[[ve]]),oe((I(),R(N,{clickable:"",onClick:r[1]||(r[1]=d=>t("en_US")),class:Ne({"bg-primary text-white":o.value==="en_US"})},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"flag"})]),_:1}),f(D,null,{default:h(()=>[f(ae,null,{default:h(()=>r[3]||(r[3]=[M("English")])),_:1,__:[3]})]),_:1})]),_:1},8,["class"])),[[ve]])]),_:1})]),_:1},8,["label"]))}}),dn=V({name:"QBanner",props:{...Je,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:a}){const{proxy:{$q:o}}=Y(),l=et(e,o),t=v(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(l.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),n=v(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const r=[q("div",{class:"q-banner__avatar col-auto row items-center self-start"},F(a.avatar)),q("div",{class:"q-banner__content col text-body2"},F(a.default))],d=F(a.action);return d!==void 0&&r.push(q("div",{class:n.value},d)),q("div",{class:t.value+(e.inlineActions===!1&&d!==void 0?" q-banner--top-padding":""),role:"alert"},r)}}});function fn(e){return Lt(e)===!0?"__q_date|"+e.getTime():Dt(e)===!0?"__q_expr|"+e.source:typeof e=="number"?"__q_numb|"+e:typeof e=="boolean"?"__q_bool|"+(e?"1":"0"):typeof e=="string"?"__q_strn|"+e:typeof e=="function"?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e}function vn(e){if(e.length<9)return e;const o=e.substring(0,8),l=e.substring(9);switch(o){case"__q_date":const t=Number(l);return new Date(Number.isNaN(t)===!0?l:t);case"__q_expr":return new RegExp(l);case"__q_numb":return Number(l);case"__q_bool":return l==="1";case"__q_strn":return""+l;case"__q_objt":return JSON.parse(l);default:return e}}function mn(){const e=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:X,setItem:X,remove:X,removeItem:X,clear:X,isEmpty:()=>!0}}function hn(e){const a=window[e+"Storage"],o=r=>{const d=a.getItem(r);return d?vn(d):null},l=r=>a.getItem(r)!==null,t=(r,d)=>{a.setItem(r,fn(d))},n=r=>{a.removeItem(r)};return{has:l,hasItem:l,getLength:()=>a.length,getItem:o,getIndex:r=>r<a.length?o(a.key(r)):null,getKey:r=>r<a.length?a.key(r):null,getAll:()=>{let r;const d={},g=a.length;for(let u=0;u<g;u++)r=a.key(u),d[r]=o(r);return d},getAllKeys:()=>{const r=[],d=a.length;for(let g=0;g<d;g++)r.push(a.key(g));return r},set:t,setItem:t,remove:n,removeItem:n,clear:()=>{a.clear()},isEmpty:()=>a.length===0}}const ot=J.has.webStorage===!1?mn():hn("local"),De={install({$q:e}){e.localStorage=ot}};Object.assign(De,ot);const gn={class:"text-body2"},Ue="push-notification-banner-dismissed",bn=Ee({__name:"PushNotificationBanner",setup(e){const a=tt(),{t:o}=Pe(),l=nt(),t=k(!1),n=k(!1),r=v(()=>l.isSupported.value&&!l.isSubscribed.value&&!n.value&&l.permission.value!=="denied"),d=async()=>{t.value=!0;try{await l.subscribe()}catch(u){console.error("Error enabling notifications:",u)}finally{t.value=!1}},g=()=>{n.value=!0,De.set(Ue,!0),a.notify({type:"info",message:o("notifications.bannerDismissed"),timeout:2e3})};return le(async()=>{await l.initialize(),n.value=De.getItem(Ue)===!0}),(u,s)=>r.value?(I(),R(dn,{key:0,class:"bg-primary text-white q-mb-md",dense:"",rounded:""},{avatar:h(()=>[f(Q,{name:"notifications"})]),action:h(()=>[f(ee,{flat:"",dense:"",label:u.$t("notifications.enable"),onClick:d,loading:t.value,"text-color":"white",class:"q-mr-sm"},null,8,["label","loading"]),f(ee,{flat:"",dense:"",label:u.$t("common.close"),onClick:g,"text-color":"white",icon:"close",size:"sm"},null,8,["label"])]),default:h(()=>[Ge("div",gn,O(u.$t("notifications.bannerMessage")),1)]),_:1})):fe("",!0)}}),pn={key:0,class:"row items-center q-gutter-xs"},yn={class:"text-body2 text-white"},Pn=Ee({__name:"MainLayout",setup(e){const a=Tt(),o=tt(),{t:l}=Pe(),t=Yt(),n=nt(),r=k(!1),d=k(!1),g=()=>{r.value=!r.value},u=()=>t.profile?t.profile.name&&t.profile.surname?`${t.profile.name} ${t.profile.surname}`:t.profile.name?t.profile.name:t.profile.username?t.profile.username:"":"",s=async()=>{(await t.signOut()).error?o.notify({type:"negative",message:l("auth.logoutError")}):(o.notify({type:"positive",message:l("auth.logoutSuccess")}),a.push("/auth")),d.value=!1};return le(async()=>{await t.initializeAuth();try{await n.initialize()}catch(S){console.log("Push notifications not available:",S)}t.isAuthenticated||a.push("/auth")}),(S,b)=>{const y=Et("router-view");return I(),R(un,{view:"lHh Lpr lFf"},{default:h(()=>[f(nn,{elevated:""},{default:h(()=>[f(tn,null,{default:h(()=>[f(ee,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:g}),f(Zt,null,{default:h(()=>[M(O(L(l)("app.title")),1)]),_:1}),f(cn),L(t).isAuthenticated?(I(),zt("div",pn,[f(Q,{name:"account_circle",size:"md",color:"white"}),Ge("span",yn,O(u()),1),f(at,{flat:"",dense:"","no-icon-animation":"","dropdown-icon":"expand_more",onClick:b[1]||(b[1]=m=>d.value=!d.value)},{default:h(()=>[f($e,null,{default:h(()=>[oe((I(),R(N,{clickable:"",onClick:b[0]||(b[0]=m=>L(a).push("/profile"))},{default:h(()=>[f(D,null,{default:h(()=>[f(ae,null,{default:h(()=>[M(O(L(l)("nav.profile")),1)]),_:1})]),_:1})]),_:1})),[[ve]]),oe((I(),R(N,{clickable:"",onClick:s},{default:h(()=>[f(D,null,{default:h(()=>[f(ae,null,{default:h(()=>[M(O(L(l)("nav.logout")),1)]),_:1})]),_:1})]),_:1})),[[ve]])]),_:1})]),_:1})])):fe("",!0)]),_:1})]),_:1}),L(t).isAuthenticated?(I(),R(on,{key:0,modelValue:r.value,"onUpdate:modelValue":b[7]||(b[7]=m=>r.value=m),"show-if-above":"",bordered:""},{default:h(()=>[f($e,null,{default:h(()=>[f(ae,{header:""},{default:h(()=>[M(O(L(l)("nav.menu")),1)]),_:1}),f(N,{clickable:"",onClick:b[2]||(b[2]=m=>L(a).push("/"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"home"})]),_:1}),f(D,null,{default:h(()=>[M(O(L(l)("nav.home")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[3]||(b[3]=m=>L(a).push("/wishes"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"card_giftcard"})]),_:1}),f(D,null,{default:h(()=>[M(O(S.$t("nav.wishes")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[4]||(b[4]=m=>L(a).push("/friends"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"people"})]),_:1}),f(D,null,{default:h(()=>[M(O(L(l)("nav.friends")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[5]||(b[5]=m=>L(a).push("/groups"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"group"})]),_:1}),f(D,null,{default:h(()=>[M(O(L(l)("nav.groups")),1)]),_:1})]),_:1}),f(N,{clickable:"",onClick:b[6]||(b[6]=m=>L(a).push("/notifications"))},{default:h(()=>[f(D,{avatar:""},{default:h(()=>[f(Q,{name:"notifications"})]),_:1}),f(D,null,{default:h(()=>[M(O(L(l)("nav.notifications")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):fe("",!0),f(ln,null,{default:h(()=>[L(t).isAuthenticated?(I(),R(bn,{key:0})):fe("",!0),f(y)]),_:1})]),_:1})}}});export{Pn as default};
