import{s as F,v as m,x as q,y as j,z as yt,A as Ye,B as Y,r as B,C as wt,D as _t,E as C,m as re,p as N,j as te,F as ve,G as Ae,H as R,I as he,J as Ee,K as qt,L as Ze,M as Ce,N as G,O as Se,P as X,R as ue,S as $e,T as Ve,U as Ct,V as St,W as kt,X as Je,Y as xt,Z as Ge,_ as Bt,$ as $t,a0 as Lt,a1 as Dt,a2 as He,a3 as le,a4 as Ne,a5 as et,a6 as Tt,a7 as At,a8 as Et,a9 as Pt,aa as zt,ab as Ot,ac as ke,ad as Mt,b as ce,ae as Qt,af as It,ag as Vt,ah as Ht,ai as Nt,a as Pe,n as I,o as E,w as h,e as v,aj as Re,ak as Q,al as Rt,am as Ft,an as ee,g as Wt,t as M,u as Ut,c as de,k as x,ao as jt,ap as Kt}from"./index-CQR_bE8v.js";import{Q as H,a as T,b as oe}from"./QItem-DFSnfN2Z.js";import{Q as Le}from"./QList-C5_MnoGL.js";import{Q as Xt}from"./QBtnGroup-DQSAHoqe.js";import{Q as Yt,b as fe}from"./format-CNzL6fQf.js";import{Q as De,g as Fe,s as We}from"./touch-CnV_mH0H.js";import{c as Zt}from"./selection-BTPEh2zl.js";import{u as tt}from"./use-quasar-n8xqa7S3.js";import{u as Jt}from"./auth-store-Brg5fDdc.js";import{u as nt}from"./usePushNotifications-D85g29Na.js";import{u as ze}from"./vue-i18n.runtime-Cy39-0Yi.js";import"./supabase-CU5Rm_jF.js";const Gt=F({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:a}){const o=m(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>q("div",{class:o.value},j(a.default))}}),en=Object.keys(Ye);function tn(e){return en.reduce((a,o)=>{const r=e[o];return r!==void 0&&(a[o]=r),a},{})}const at=F({name:"QBtnDropdown",props:{...Ye,...yt,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:o}){const{proxy:r}=Y(),t=B(e.modelValue),n=B(null),l=wt(),d=m(()=>{const c={"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":l.value,"aria-label":e.toggleAriaLabel||r.$q.lang.label[t.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(c["aria-disabled"]="true"),c}),g=m(()=>"q-btn-dropdown__arrow"+(t.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=m(()=>_t(e)),s=m(()=>tn(e));C(()=>e.modelValue,c=>{n.value?.[c?"show":"hide"]()}),C(()=>e.split,L);function S(c){t.value=!0,o("beforeShow",c)}function w(c){o("show",c),o("update:modelValue",!0)}function f(c){t.value=!1,o("beforeHide",c)}function p(c){o("hide",c),o("update:modelValue",!1)}function k(c){o("click",c)}function $(c){ve(c),L(),o("click",c)}function _(c){n.value?.toggle(c)}function b(c){n.value?.show(c)}function L(c){n.value?.hide(c)}return Object.assign(r,{show:b,hide:L,toggle:_}),re(()=>{e.modelValue===!0&&b()}),()=>{const c=[q(N,{class:g.value,name:e.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&c.push(q(Yt,{ref:n,id:l.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:S,onShow:w,onBeforeHide:f,onHide:p},a.default)),e.split===!1?q(te,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:k},{default:()=>j(a.label,[]).concat(c),loading:a.loading}):q(Xt,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[q(te,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$},{default:a.label,loading:a.loading}),q(te,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...d.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>c)])}}}),nn=F({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:a}){const o=m(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>q("div",{class:o.value,role:"toolbar"},j(a.default))}}),an=F({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:o}){const{proxy:{$q:r}}=Y(),t=Ae(he,R);if(t===R)return console.error("QHeader needs to be child of QLayout"),R;const n=B(parseInt(e.heightHint,10)),l=B(!0),d=m(()=>e.reveal===!0||t.view.value.indexOf("H")!==-1||r.platform.is.ios&&t.isContainer.value===!0),g=m(()=>{if(e.modelValue!==!0)return 0;if(d.value===!0)return l.value===!0?n.value:0;const b=n.value-t.scroll.value.position;return b>0?b:0}),u=m(()=>e.modelValue!==!0||d.value===!0&&l.value!==!0),s=m(()=>e.modelValue===!0&&u.value===!0&&e.reveal===!0),S=m(()=>"q-header q-layout__section--marginal "+(d.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),w=m(()=>{const b=t.rows.value.top,L={};return b[0]==="l"&&t.left.space===!0&&(L[r.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),b[2]==="r"&&t.right.space===!0&&(L[r.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),L});function f(b,L){t.update("header",b,L)}function p(b,L){b.value!==L&&(b.value=L)}function k({height:b}){p(n,b),f("size",b)}function $(b){s.value===!0&&p(l,!0),o("focusin",b)}C(()=>e.modelValue,b=>{f("space",b),p(l,!0),t.animate()}),C(g,b=>{f("offset",b)}),C(()=>e.reveal,b=>{b===!1&&p(l,e.modelValue)}),C(l,b=>{t.animate(),o("reveal",b)}),C(t.scroll,b=>{e.reveal===!0&&p(l,b.direction==="up"||b.position<=e.revealOffset||b.position-b.inflectionPoint<100)});const _={};return t.instances.header=_,e.modelValue===!0&&f("size",n.value),f("space",e.modelValue),f("offset",g.value),Ee(()=>{t.instances.header===_&&(t.instances.header=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const b=qt(a.default,[]);return e.elevated===!0&&b.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(q(De,{debounce:0,onResize:k})),q("header",{class:S.value,style:w.value,onFocusin:$},b)}}});function xe(e,a,o){const r=$e(e);let t,n=r.left-a.event.x,l=r.top-a.event.y,d=Math.abs(n),g=Math.abs(l);const u=a.direction;u.horizontal===!0&&u.vertical!==!0?t=n<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?t=l<0?"up":"down":u.up===!0&&l<0?(t="up",d>g&&(u.left===!0&&n<0?t="left":u.right===!0&&n>0&&(t="right"))):u.down===!0&&l>0?(t="down",d>g&&(u.left===!0&&n<0?t="left":u.right===!0&&n>0&&(t="right"))):u.left===!0&&n<0?(t="left",d<g&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down"))):u.right===!0&&n>0&&(t="right",d<g&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down")));let s=!1;if(t===void 0&&o===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,s=!0,t==="left"||t==="right"?(r.left-=n,d=0,n=0):(r.top-=l,g=0,l=0)}return{synthetic:s,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:r,direction:t,isFirst:a.event.isFirst,isFinal:o===!0,duration:Date.now()-a.event.time,distance:{x:d,y:g},offset:{x:n,y:l},delta:{x:r.left-a.event.lastX,y:r.top-a.event.lastY}}}}let on=0;const Be=Ze({name:"touch-pan",beforeMount(e,{value:a,modifiers:o}){if(o.mouse!==!0&&G.has.touch!==!0)return;function r(n,l){o.mouse===!0&&l===!0?St(n):(o.stop===!0&&ve(n),o.prevent===!0&&Ve(n))}const t={uid:"qvtp_"+on++,handler:a,modifiers:o,direction:Fe(o),noop:X,mouseStart(n){We(n,t)&&Ct(n)&&(ue(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(n,!0))},touchStart(n){if(We(n,t)){const l=n.target;ue(t,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","passiveCapture"],[l,"touchend","end","passiveCapture"]]),t.start(n)}},start(n,l){if(G.is.firefox===!0&&Se(e,!0),t.lastEvt=n,l===!0||o.stop===!0){if(t.direction.all!==!0&&(l!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const u=n.type.indexOf("mouse")!==-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&Ve(u),n.cancelBubble===!0&&ve(u),Object.assign(u,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[t.uid]:n.qClonedBy.concat(t.uid)}),t.initialEvent={target:n.target,event:u}}ve(n)}const{left:d,top:g}=$e(n);t.event={x:d,y:g,time:Date.now(),mouse:l===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:g}},move(n){if(t.event===void 0)return;const l=$e(n),d=l.left-t.event.x,g=l.top-t.event.y;if(d===0&&g===0)return;t.lastEvt=n;const u=t.event.mouse===!0,s=()=>{r(n,u);let f;o.preserveCursor!==!0&&o.preservecursor!==!0&&(f=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Zt(),t.styleCleanup=p=>{if(t.styleCleanup=void 0,f!==void 0&&(document.documentElement.style.cursor=f),document.body.classList.remove("non-selectable"),u===!0){const k=()=>{document.body.classList.remove("no-pointer-events--children")};p!==void 0?setTimeout(()=>{k(),p()},50):k()}else p!==void 0&&p()}};if(t.event.detected===!0){t.event.isFirst!==!0&&r(n,t.event.mouse);const{payload:f,synthetic:p}=xe(n,t,!1);f!==void 0&&(t.handler(f)===!1?t.end(n):(t.styleCleanup===void 0&&t.event.isFirst===!0&&s(),t.event.lastX=f.position.left,t.event.lastY=f.position.top,t.event.lastDir=p===!0?void 0:f.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||u===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){s(),t.event.detected=!0,t.move(n);return}const S=Math.abs(d),w=Math.abs(g);S!==w&&(t.direction.horizontal===!0&&S>w||t.direction.vertical===!0&&S<w||t.direction.up===!0&&S<w&&g<0||t.direction.down===!0&&S<w&&g>0||t.direction.left===!0&&S>w&&d<0||t.direction.right===!0&&S>w&&d>0?(t.event.detected=!0,t.move(n)):t.end(n,!0))},end(n,l){if(t.event!==void 0){if(Ce(t,"temp"),G.is.firefox===!0&&Se(e,!1),l===!0)t.styleCleanup?.(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(xe(n===void 0?t.lastEvt:n,t).payload);const{payload:d}=xe(n===void 0?t.lastEvt:n,t,!0),g=()=>{t.handler(d)};t.styleCleanup!==void 0?t.styleCleanup(g):g()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,o.mouse===!0){const n=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ue(t,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}G.has.touch===!0&&ue(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const o=e.__qtouchpan;o!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&o.end(),o.handler=a.value),o.direction=Fe(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),Ce(a,"main"),Ce(a,"temp"),G.is.firefox===!0&&Se(e,!1),a.styleCleanup?.(),delete e.__qtouchpan)}}),Ue=150,ln=F({name:"QDrawer",inheritAttrs:!1,props:{...xt,...Je,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...kt,"onLayout","miniState"],setup(e,{slots:a,emit:o,attrs:r}){const t=Y(),{proxy:{$q:n}}=t,l=Ge(e,n),{preventBodyScroll:d}=Dt(),{registerTimeout:g,removeTimeout:u}=Bt(),s=Ae(he,R);if(s===R)return console.error("QDrawer needs to be child of QLayout"),R;let S,w=null,f;const p=B(e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint),k=m(()=>e.mini===!0&&p.value!==!0),$=m(()=>k.value===!0?e.miniWidth:e.width),_=B(e.showIfAbove===!0&&p.value===!1?!0:e.modelValue===!0),b=m(()=>e.persistent!==!0&&(p.value===!0||lt.value===!0));function L(i,y){if(z(),i!==!1&&s.animate(),O(0),p.value===!0){const P=s.instances[ie.value];P?.belowBreakpoint===!0&&P.hide(!1),W(1),s.isContainer.value!==!0&&d(!0)}else W(0),i!==!1&&we(!1);g(()=>{i!==!1&&we(!0),y!==!0&&o("show",i)},Ue)}function c(i,y){ne(),i!==!1&&s.animate(),W(0),O(Z.value*$.value),_e(),y!==!0?g(()=>{o("hide",i)},Ue):u()}const{show:D,hide:A}=$t({showing:_,hideOnRouteChange:b,handleShow:L,handleHide:c}),{addToHistory:z,removeFromHistory:ne}=Lt(_,A,b),K={belowBreakpoint:p,hide:A},V=m(()=>e.side==="right"),Z=m(()=>(n.lang.rtl===!0?-1:1)*(V.value===!0?1:-1)),Oe=B(0),J=B(!1),ge=B(!1),Me=B($.value*Z.value),ie=m(()=>V.value===!0?"left":"right"),be=m(()=>_.value===!0&&p.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:$.value:0),pe=m(()=>e.overlay===!0||e.miniToOverlay===!0||s.view.value.indexOf(V.value?"R":"L")!==-1||n.platform.is.ios===!0&&s.isContainer.value===!0),ae=m(()=>e.overlay===!1&&_.value===!0&&p.value===!1),lt=m(()=>e.overlay===!0&&_.value===!0&&p.value===!1),rt=m(()=>"fullscreen q-drawer__backdrop"+(_.value===!1&&J.value===!1?" hidden":"")),it=m(()=>({backgroundColor:`rgba(0,0,0,${Oe.value*.4})`})),Qe=m(()=>V.value===!0?s.rows.value.top[2]==="r":s.rows.value.top[0]==="l"),st=m(()=>V.value===!0?s.rows.value.bottom[2]==="r":s.rows.value.bottom[0]==="l"),ut=m(()=>{const i={};return s.header.space===!0&&Qe.value===!1&&(pe.value===!0?i.top=`${s.header.offset}px`:s.header.space===!0&&(i.top=`${s.header.size}px`)),s.footer.space===!0&&st.value===!1&&(pe.value===!0?i.bottom=`${s.footer.offset}px`:s.footer.space===!0&&(i.bottom=`${s.footer.size}px`)),i}),ct=m(()=>{const i={width:`${$.value}px`,transform:`translateX(${Me.value}px)`};return p.value===!0?i:Object.assign(i,ut.value)}),dt=m(()=>"q-drawer__content fit "+(s.isContainer.value!==!0?"scroll":"overflow-auto")),ft=m(()=>`q-drawer q-drawer--${e.side}`+(ge.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(l.value===!0?" q-drawer--dark q-dark":"")+(J.value===!0?" no-transition":_.value===!0?"":" q-layout--prevent-focus")+(p.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${k.value===!0?"mini":"standard"}`+(pe.value===!0||ae.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Qe.value===!0?" q-drawer--top-padding":""))),vt=m(()=>{const i=n.lang.rtl===!0?e.side:ie.value;return[[Be,bt,void 0,{[i]:!0,mouse:!0}]]}),mt=m(()=>{const i=n.lang.rtl===!0?ie.value:e.side;return[[Be,Ie,void 0,{[i]:!0,mouse:!0}]]}),ht=m(()=>{const i=n.lang.rtl===!0?ie.value:e.side;return[[Be,Ie,void 0,{[i]:!0,mouse:!0,mouseAllDir:!0}]]});function ye(){pt(p,e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint)}C(p,i=>{i===!0?(S=_.value,_.value===!0&&A(!1)):e.overlay===!1&&e.behavior!=="mobile"&&S!==!1&&(_.value===!0?(O(0),W(0),_e()):D(!1))}),C(()=>e.side,(i,y)=>{s.instances[y]===K&&(s.instances[y]=void 0,s[y].space=!1,s[y].offset=0),s.instances[i]=K,s[i].size=$.value,s[i].space=ae.value,s[i].offset=be.value}),C(s.totalWidth,()=>{(s.isContainer.value===!0||document.qScrollPrevented!==!0)&&ye()}),C(()=>e.behavior+e.breakpoint,ye),C(s.isContainer,i=>{_.value===!0&&d(i!==!0),i===!0&&ye()}),C(s.scrollbarWidth,()=>{O(_.value===!0?0:void 0)}),C(be,i=>{U("offset",i)}),C(ae,i=>{o("onLayout",i),U("space",i)}),C(V,()=>{O()}),C($,i=>{O(),qe(e.miniToOverlay,i)}),C(()=>e.miniToOverlay,i=>{qe(i,$.value)}),C(()=>n.lang.rtl,()=>{O()}),C(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(gt(),s.animate())}),C(k,i=>{o("miniState",i)});function O(i){i===void 0?He(()=>{i=_.value===!0?0:$.value,O(Z.value*i)}):(s.isContainer.value===!0&&V.value===!0&&(p.value===!0||Math.abs(i)===$.value)&&(i+=Z.value*s.scrollbarWidth.value),Me.value=i)}function W(i){Oe.value=i}function we(i){const y=i===!0?"remove":s.isContainer.value!==!0?"add":"";y!==""&&document.body.classList[y]("q-body--drawer-toggle")}function gt(){w!==null&&clearTimeout(w),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),ge.value=!0,w=setTimeout(()=>{w=null,ge.value=!1,t?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function bt(i){if(_.value!==!1)return;const y=$.value,P=fe(i.distance.x,0,y);if(i.isFinal===!0){P>=Math.min(75,y)===!0?D():(s.animate(),W(0),O(Z.value*y)),J.value=!1;return}O((n.lang.rtl===!0?V.value!==!0:V.value)?Math.max(y-P,0):Math.min(0,P-y)),W(fe(P/y,0,1)),i.isFirst===!0&&(J.value=!0)}function Ie(i){if(_.value!==!0)return;const y=$.value,P=i.direction===e.side,se=(n.lang.rtl===!0?P!==!0:P)?fe(i.distance.x,0,y):0;if(i.isFinal===!0){Math.abs(se)<Math.min(75,y)===!0?(s.animate(),W(1),O(0)):A(),J.value=!1;return}O(Z.value*se),W(fe(1-se/y,0,1)),i.isFirst===!0&&(J.value=!0)}function _e(){d(!1),we(!0)}function U(i,y){s.update(e.side,i,y)}function pt(i,y){i.value!==y&&(i.value=y)}function qe(i,y){U("size",i===!0?e.miniWidth:y)}return s.instances[e.side]=K,qe(e.miniToOverlay,$.value),U("space",ae.value),U("offset",be.value),e.showIfAbove===!0&&e.modelValue!==!0&&_.value===!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",!0),re(()=>{o("onLayout",ae.value),o("miniState",k.value),S=e.showIfAbove===!0;const i=()=>{(_.value===!0?L:c)(!1,!0)};if(s.totalWidth.value!==0){He(i);return}f=C(s.totalWidth,()=>{f(),f=void 0,_.value===!1&&e.showIfAbove===!0&&p.value===!1?D(!1):i()})}),Ee(()=>{f?.(),w!==null&&(clearTimeout(w),w=null),_.value===!0&&_e(),s.instances[e.side]===K&&(s.instances[e.side]=void 0,U("size",0),U("offset",0),U("space",!1))}),()=>{const i=[];p.value===!0&&(e.noSwipeOpen===!1&&i.push(le(q("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),vt.value)),i.push(Ne("div",{ref:"backdrop",class:rt.value,style:it.value,"aria-hidden":"true",onClick:A},void 0,"backdrop",e.noSwipeBackdrop!==!0&&_.value===!0,()=>ht.value)));const y=k.value===!0&&a.mini!==void 0,P=[q("div",{...r,key:""+y,class:[dt.value,r.class]},y===!0?a.mini():j(a.default))];return e.elevated===!0&&_.value===!0&&P.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(Ne("aside",{ref:"content",class:ft.value,style:ct.value},P,"contentclose",e.noSwipeClose!==!0&&p.value===!0,()=>mt.value)),q("div",{class:"q-drawer-container"},i)}}}),rn=F({name:"QPageContainer",setup(e,{slots:a}){const{proxy:{$q:o}}=Y(),r=Ae(he,R);if(r===R)return console.error("QPageContainer needs to be child of QLayout"),R;et(Tt,!0);const t=m(()=>{const n={};return r.header.space===!0&&(n.paddingTop=`${r.header.size}px`),r.right.space===!0&&(n[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${r.right.size}px`),r.footer.space===!0&&(n.paddingBottom=`${r.footer.size}px`),r.left.space===!0&&(n[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${r.left.size}px`),n});return()=>q("div",{class:"q-page-container",style:t.value},j(a.default))}}),{passive:je}=At,sn=["both","horizontal","vertical"],un=F({name:"QScrollObserver",props:{axis:{type:String,validator:e=>sn.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:Et},emits:["scroll"],setup(e,{emit:a}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let r=null,t,n;C(()=>e.scrollTarget,()=>{g(),d()});function l(){r?.();const S=Math.max(0,zt(t)),w=Ot(t),f={top:S-o.position.top,left:w-o.position.left};if(e.axis==="vertical"&&f.top===0||e.axis==="horizontal"&&f.left===0)return;const p=Math.abs(f.top)>=Math.abs(f.left)?f.top<0?"up":"down":f.left<0?"left":"right";o.position={top:S,left:w},o.directionChanged=o.direction!==p,o.delta=f,o.directionChanged===!0&&(o.direction=p,o.inflectionPoint=o.position),a("scroll",{...o})}function d(){t=Pt(n,e.scrollTarget),t.addEventListener("scroll",u,je),u(!0)}function g(){t!==void 0&&(t.removeEventListener("scroll",u,je),t=void 0)}function u(S){if(S===!0||e.debounce===0||e.debounce==="0")l();else if(r===null){const[w,f]=e.debounce?[setTimeout(l,e.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];r=()=>{f(w),r=null}}}const{proxy:s}=Y();return C(()=>s.$q.lang.rtl,l),re(()=>{n=s.$el.parentNode,d()}),Ee(()=>{r?.(),g()}),Object.assign(s,{trigger:u,getPosition:()=>o}),X}}),cn=F({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:a,emit:o}){const{proxy:{$q:r}}=Y(),t=B(null),n=B(r.screen.height),l=B(e.container===!0?0:r.screen.width),d=B({position:0,direction:"down",inflectionPoint:0}),g=B(0),u=B(Mt.value===!0?0:ke()),s=m(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),S=m(()=>e.container===!1?{minHeight:r.screen.height+"px"}:null),w=m(()=>u.value!==0?{[r.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),f=m(()=>u.value!==0?{[r.lang.rtl===!0?"right":"left"]:0,[r.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function p(c){if(e.container===!0||document.qScrollPrevented!==!0){const D={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};d.value=D,e.onScroll!==void 0&&o("scroll",D)}}function k(c){const{height:D,width:A}=c;let z=!1;n.value!==D&&(z=!0,n.value=D,e.onScrollHeight!==void 0&&o("scrollHeight",D),_()),l.value!==A&&(z=!0,l.value=A),z===!0&&e.onResize!==void 0&&o("resize",c)}function $({height:c}){g.value!==c&&(g.value=c,_())}function _(){if(e.container===!0){const c=n.value>g.value?ke():0;u.value!==c&&(u.value=c)}}let b=null;const L={instances:{},view:m(()=>e.view),isContainer:m(()=>e.container),rootRef:t,height:n,containerHeight:g,scrollbarWidth:u,totalWidth:m(()=>l.value+u.value),rows:m(()=>{const c=e.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:ce({size:0,offset:0,space:!1}),right:ce({size:300,offset:0,space:!1}),footer:ce({size:0,offset:0,space:!1}),left:ce({size:300,offset:0,space:!1}),scroll:d,animate(){b!==null?clearTimeout(b):document.body.classList.add("q-body--layout-animate"),b=setTimeout(()=>{b=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,D,A){L[c][D]=A}};if(et(he,L),ke()>0){let c=function(){z=null,ne.classList.remove("hide-scrollbar")},D=function(){if(z===null){if(ne.scrollHeight>r.screen.height)return;ne.classList.add("hide-scrollbar")}else clearTimeout(z);z=setTimeout(c,300)},A=function(K){z!==null&&K==="remove"&&(clearTimeout(z),c()),window[`${K}EventListener`]("resize",D)},z=null;const ne=document.body;C(()=>e.container!==!0?"add":"remove",A),e.container!==!0&&A("add"),Qt(()=>{A("remove")})}return()=>{const c=It(a.default,[q(un,{onScroll:p}),q(De,{onResize:k})]),D=q("div",{class:s.value,style:S.value,ref:e.container===!0?void 0:t,tabindex:-1},c);return e.container===!0?q("div",{class:"q-layout-container overflow-hidden",ref:t},[q(De,{onResize:$}),q("div",{class:"absolute-full",style:w.value},[q("div",{class:"scroll",style:f.value},[D])])]):D}}});function Ke(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const me=Ze({name:"close-popup",beforeMount(e,{value:a}){const o={depth:Ke(a),handler(r){o.depth!==0&&setTimeout(()=>{const t=Ht(e);t!==void 0&&Nt(t,r,o.depth)})},handlerKey(r){Vt(r,13)===!0&&o.handler(r)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:a,oldValue:o}){a!==o&&(e.__qclosepopup.depth=Ke(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),dn=Pe({__name:"LanguageSwitcher",setup(e){const{locale:a}=ze(),o=m(()=>a.value),r=m(()=>{switch(o.value){case"cs_CZ":return"Čeština";case"en_US":return"English";default:return"Language"}}),t=n=>{a.value=n,localStorage.setItem("darkovnicek-language",n)};return(n,l)=>(E(),I(at,{flat:"",dense:"",label:n.$q.screen.xs?void 0:r.value,icon:"language"},{default:h(()=>[v(Le,null,{default:h(()=>[le((E(),I(H,{clickable:"",onClick:l[0]||(l[0]=d=>t("cs_CZ")),class:Re({"bg-primary text-white":o.value==="cs_CZ"})},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"flag"})]),_:1}),v(T,null,{default:h(()=>[v(oe,null,{default:h(()=>l[2]||(l[2]=[Q("Čeština")])),_:1,__:[2]})]),_:1})]),_:1},8,["class"])),[[me]]),le((E(),I(H,{clickable:"",onClick:l[1]||(l[1]=d=>t("en_US")),class:Re({"bg-primary text-white":o.value==="en_US"})},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"flag"})]),_:1}),v(T,null,{default:h(()=>[v(oe,null,{default:h(()=>l[3]||(l[3]=[Q("English")])),_:1,__:[3]})]),_:1})]),_:1},8,["class"])),[[me]])]),_:1})]),_:1},8,["label"]))}}),fn=F({name:"QBanner",props:{...Je,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:a}){const{proxy:{$q:o}}=Y(),r=Ge(e,o),t=m(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(r.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),n=m(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const l=[q("div",{class:"q-banner__avatar col-auto row items-center self-start"},j(a.avatar)),q("div",{class:"q-banner__content col text-body2"},j(a.default))],d=j(a.action);return d!==void 0&&l.push(q("div",{class:n.value},d)),q("div",{class:t.value+(e.inlineActions===!1&&d!==void 0?" q-banner--top-padding":""),role:"alert"},l)}}});function vn(e){return Rt(e)===!0?"__q_date|"+e.getTime():Ft(e)===!0?"__q_expr|"+e.source:typeof e=="number"?"__q_numb|"+e:typeof e=="boolean"?"__q_bool|"+(e?"1":"0"):typeof e=="string"?"__q_strn|"+e:typeof e=="function"?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e}function mn(e){if(e.length<9)return e;const o=e.substring(0,8),r=e.substring(9);switch(o){case"__q_date":const t=Number(r);return new Date(Number.isNaN(t)===!0?r:t);case"__q_expr":return new RegExp(r);case"__q_numb":return Number(r);case"__q_bool":return r==="1";case"__q_strn":return""+r;case"__q_objt":return JSON.parse(r);default:return e}}function hn(){const e=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:X,setItem:X,remove:X,removeItem:X,clear:X,isEmpty:()=>!0}}function gn(e){const a=window[e+"Storage"],o=l=>{const d=a.getItem(l);return d?mn(d):null},r=l=>a.getItem(l)!==null,t=(l,d)=>{a.setItem(l,vn(d))},n=l=>{a.removeItem(l)};return{has:r,hasItem:r,getLength:()=>a.length,getItem:o,getIndex:l=>l<a.length?o(a.key(l)):null,getKey:l=>l<a.length?a.key(l):null,getAll:()=>{let l;const d={},g=a.length;for(let u=0;u<g;u++)l=a.key(u),d[l]=o(l);return d},getAllKeys:()=>{const l=[],d=a.length;for(let g=0;g<d;g++)l.push(a.key(g));return l},set:t,setItem:t,remove:n,removeItem:n,clear:()=>{a.clear()},isEmpty:()=>a.length===0}}const ot=G.has.webStorage===!1?hn():gn("local"),Te={install({$q:e}){e.localStorage=ot}};Object.assign(Te,ot);const bn={class:"text-body2"},Xe="push-notification-banner-dismissed",pn=Pe({__name:"PushNotificationBanner",setup(e){const a=tt(),{t:o}=ze(),r=nt(),t=B(!1),n=B(!1),l=m(()=>r.isSupported.value&&!r.isSubscribed.value&&!n.value&&r.permission.value!=="denied"),d=async()=>{t.value=!0;try{await r.subscribe()}catch(u){console.error("Error enabling notifications:",u)}finally{t.value=!1}},g=()=>{n.value=!0,Te.set(Xe,!0),a.notify({type:"info",message:o("notifications.bannerDismissed"),timeout:2e3})};return re(async()=>{await r.initialize(),n.value=Te.getItem(Xe)===!0}),(u,s)=>l.value?(E(),I(fn,{key:0,class:"bg-primary text-white q-mb-md",dense:"",rounded:""},{avatar:h(()=>[v(N,{name:"notifications"})]),action:h(()=>[v(te,{flat:"",dense:"",label:u.$t("notifications.enable"),onClick:d,loading:t.value,"text-color":"white",class:"q-mr-sm"},null,8,["label","loading"]),v(te,{flat:"",dense:"",label:u.$t("common.close"),onClick:g,"text-color":"white",icon:"close",size:"sm"},null,8,["label"])]),default:h(()=>[Wt("div",bn,M(u.$t("notifications.bannerMessage")),1)]),_:1})):ee("",!0)}}),yn={key:0,class:"row items-center q-gutter-xs"},wn=["src"],_n={key:1},qn={key:0,class:"text-body2 text-white"},On=Pe({__name:"MainLayout",setup(e){const a=Ut(),o=tt(),{t:r}=ze(),t=Jt(),n=nt(),l=B(!1),d=B(!1),g=()=>{l.value=!l.value},u=()=>t.profile?t.profile.name&&t.profile.surname?`${t.profile.name} ${t.profile.surname}`:t.profile.name?t.profile.name:t.profile.username?t.profile.username:"":"",s=()=>t.profile?t.profile.name&&t.profile.surname?`${t.profile.name.charAt(0)}${t.profile.surname.charAt(0)}`:t.profile.username?t.profile.username.charAt(0).toUpperCase():t.profile.email.charAt(0).toUpperCase():"",S=async()=>{(await t.signOut()).error?o.notify({type:"negative",message:r("auth.logoutError")}):(o.notify({type:"positive",message:r("auth.logoutSuccess")}),a.push("/auth")),d.value=!1};return re(async()=>{try{await n.initialize()}catch(w){console.log("Push notifications not available:",w)}t.isAuthenticated||a.push("/auth")}),(w,f)=>{const p=Kt("router-view");return E(),I(cn,{view:"lHh Lpr lFf"},{default:h(()=>[v(an,{elevated:""},{default:h(()=>[v(nn,null,{default:h(()=>[v(te,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:g}),v(Gt,null,{default:h(()=>[Q(M(x(r)("app.title")),1)]),_:1}),v(dn),x(t).isAuthenticated?(E(),de("div",yn,[v(jt,{size:"32px",color:"primary","text-color":"white"},{default:h(()=>[x(t).profile?.avatar_url?(E(),de("img",{key:0,src:x(t).profile.avatar_url},null,8,wn)):(E(),de("span",_n,M(s()),1))]),_:1}),x(o).screen.xs?ee("",!0):(E(),de("span",qn,M(u()),1)),v(at,{flat:"",dense:"","no-icon-animation":"","dropdown-icon":"expand_more",onClick:f[1]||(f[1]=k=>d.value=!d.value)},{default:h(()=>[v(Le,null,{default:h(()=>[le((E(),I(H,{clickable:"",onClick:f[0]||(f[0]=k=>x(a).push("/profile"))},{default:h(()=>[v(T,null,{default:h(()=>[v(oe,null,{default:h(()=>[Q(M(x(r)("nav.profile")),1)]),_:1})]),_:1})]),_:1})),[[me]]),le((E(),I(H,{clickable:"",onClick:S},{default:h(()=>[v(T,null,{default:h(()=>[v(oe,null,{default:h(()=>[Q(M(x(r)("nav.logout")),1)]),_:1})]),_:1})]),_:1})),[[me]])]),_:1})]),_:1})])):ee("",!0)]),_:1})]),_:1}),x(t).isAuthenticated?(E(),I(ln,{key:0,modelValue:l.value,"onUpdate:modelValue":f[7]||(f[7]=k=>l.value=k),"show-if-above":"",bordered:""},{default:h(()=>[v(Le,null,{default:h(()=>[v(oe,{header:""},{default:h(()=>[Q(M(x(r)("nav.menu")),1)]),_:1}),v(H,{clickable:"",onClick:f[2]||(f[2]=k=>x(a).push("/"))},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"home"})]),_:1}),v(T,null,{default:h(()=>[Q(M(x(r)("nav.home")),1)]),_:1})]),_:1}),v(H,{clickable:"",onClick:f[3]||(f[3]=k=>x(a).push("/wishes"))},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"card_giftcard"})]),_:1}),v(T,null,{default:h(()=>[Q(M(w.$t("nav.wishes")),1)]),_:1})]),_:1}),v(H,{clickable:"",onClick:f[4]||(f[4]=k=>x(a).push("/friends"))},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"people"})]),_:1}),v(T,null,{default:h(()=>[Q(M(x(r)("nav.friends")),1)]),_:1})]),_:1}),v(H,{clickable:"",onClick:f[5]||(f[5]=k=>x(a).push("/groups"))},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"group"})]),_:1}),v(T,null,{default:h(()=>[Q(M(x(r)("nav.groups")),1)]),_:1})]),_:1}),x(t).profile?.is_admin?(E(),I(H,{key:0,clickable:"",onClick:f[6]||(f[6]=k=>x(a).push("/notifications"))},{default:h(()=>[v(T,{avatar:""},{default:h(()=>[v(N,{name:"notifications"})]),_:1}),v(T,null,{default:h(()=>[Q(M(x(r)("nav.notifications")),1)]),_:1})]),_:1})):ee("",!0)]),_:1})]),_:1},8,["modelValue"])):ee("",!0),v(rn,null,{default:h(()=>[x(t).isAuthenticated?(E(),I(pn,{key:0})):ee("",!0),v(p)]),_:1})]),_:1})}}});export{On as default};
