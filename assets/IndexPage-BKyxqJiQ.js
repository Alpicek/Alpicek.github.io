import{a as N,u as P,r as _,x as U,w as V,y as c,h as e,o as l,g as o,t as s,q as i,ab as p,Q as f,f as a,z as v,l as h,p as x,v as u,az as k,e as j,D as T,ay as E,F as M,j as G,aD as g}from"./index-BR5I7U9B.js";import{Q as H,a as q,b as C}from"./QItem-C5GHLq0T.js";import{Q as J}from"./QList-D9VkAbJk.js";import{Q as K}from"./QPage-BhHXWAMh.js";import{u as O}from"./auth-store-CLpI6O-q.js";import{u as X}from"./useWishes-B7vuTOXU.js";import{u as Y}from"./useFriends-Cutge8TX.js";import"./supabase-C7Q3J7Aw.js";const Z={class:"text-h4 q-mb-md"},ee={class:"row q-gutter-md justify-center"},te={class:"col-12 col-md-4"},ae={class:"text-h6 q-mt-md"},se={class:"text-h3 text-primary"},oe={class:"col-12 col-md-4"},re={class:"text-h6 q-mt-md"},ne={class:"text-h3 text-secondary"},de={class:"col-12 col-md-4"},ie={class:"text-h6 q-mt-md"},le={class:"text-h3 text-orange"},ce={class:"q-mt-lg"},ue={class:"text-h5 q-mb-md"},me={class:"text-subtitle1 q-mb-md"},fe={class:"text-h6 q-mt-md text-grey-6"},he={class:"text-body2 text-grey-6"},Ce=N({__name:"IndexPage",setup(_e){const A=G(),{t:r}=P(),m=O(),{fetchWishes:D,fetchFriendsWishes:F}=X(),{fetchFriends:W,fetchPendingRequests:I}=Y(),Q=_(0),$=_(0),w=_(0),b=_([]),z=t=>t.name&&t.surname?`${t.name} ${t.surname}`:t.username||t.email,S=t=>t.name&&t.surname?`${t.name.charAt(0)}${t.surname.charAt(0)}`:t.username?t.username.charAt(0).toUpperCase():t.email.charAt(0).toUpperCase(),B=t=>{const n=r("date.format");return new Date(t).toLocaleDateString(n)},L=t=>{const n=t.created_for_user.id;n&&A.push(`/app/friend/${n}?highlight=${t.id}`)},R=async()=>{if(m.user){const t=await D(m.user.id,!0);Q.value=t?.data?.length||0;const n=await W(m.user.id,!0);$.value=n?.data?.length||0;const d=await I(m.user.id,!0);w.value=d?.data?.length||0;const y=await F(m.user.id);y?.data&&(b.value=y.data.slice(0,5))}};return U(R),V(()=>m.user,R,{immediate:!0}),(t,n)=>(l(),c(K,{class:"q-pa-md"},{default:e(()=>[o("div",Z,s(i(r)("app.welcome")),1),o("div",ee,[o("div",te,[p((l(),c(f,{class:"text-center cursor-pointer",clickable:"",onClick:n[0]||(n[0]=d=>t.$router.push("/app/wishes")),"aria-label":"{{ t('dashboard.viewWishes') }}"},{default:e(()=>[a(h,null,{default:e(()=>[a(v,{name:"card_giftcard",size:"3rem",color:"primary"}),o("div",ae,s(i(r)("dashboard.myWishes")),1),o("div",se,s(Q.value),1)]),_:1}),a(k,null,{default:e(()=>[a(x,{flat:"",color:"primary"},{default:e(()=>[u(s(i(r)("dashboard.viewWishes")),1)]),_:1})]),_:1})]),_:1})),[[g]])]),o("div",oe,[p((l(),c(f,{class:"text-center cursor-pointer",clickable:"",onClick:n[1]||(n[1]=d=>t.$router.push("/app/friends")),"aria-label":"{{ t('dashboard.manageFriends') }}"},{default:e(()=>[a(h,null,{default:e(()=>[a(v,{name:"people",size:"3rem",color:"secondary"}),o("div",re,s(i(r)("dashboard.friends")),1),o("div",ne,s($.value),1)]),_:1}),a(k,null,{default:e(()=>[a(x,{flat:"",color:"secondary"},{default:e(()=>[u(s(i(r)("dashboard.manageFriends")),1)]),_:1})]),_:1})]),_:1})),[[g]])]),o("div",de,[p((l(),c(f,{class:"text-center cursor-pointer",clickable:"",onClick:n[2]||(n[2]=d=>t.$router.push("/app/friends?tab=pending")),"aria-label":"{{ t('dashboard.checkRequests') }}"},{default:e(()=>[a(h,null,{default:e(()=>[a(v,{name:"notifications",size:"3rem",color:"orange"}),o("div",ie,s(i(r)("dashboard.requests")),1),o("div",le,s(w.value),1)]),_:1}),a(k,null,{default:e(()=>[a(x,{flat:"",color:"orange"},{default:e(()=>[u(s(i(r)("dashboard.checkRequests")),1)]),_:1})]),_:1})]),_:1})),[[g]])])]),o("div",ce,[o("div",ue,s(i(r)("dashboard.recentActivity")),1),b.value.length>0?(l(),c(f,{key:0},{default:e(()=>[a(h,null,{default:e(()=>[o("div",me,s(i(r)("dashboard.newWishesFromFriends")),1),a(J,null,{default:e(()=>[(l(!0),j(M,null,T(b.value,d=>p((l(),c(H,{key:d.id,clickable:"",onClick:y=>L(d)},{default:e(()=>[a(q,{avatar:""},{default:e(()=>[a(E,{color:"primary","text-color":"white"},{default:e(()=>[u(s(S(d.created_for_user)),1)]),_:2},1024)]),_:2},1024),a(q,null,{default:e(()=>[a(C,null,{default:e(()=>[u(s(d.name),1)]),_:2},1024),a(C,{caption:""},{default:e(()=>[u(s(z(d.created_for_user)),1)]),_:2},1024)]),_:2},1024),a(q,{side:""},{default:e(()=>[a(C,{caption:""},{default:e(()=>[u(s(d.created_at?B(d.created_at):i(r)("common.unknown")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[g]])),128))]),_:1})]),_:1})]),_:1})):(l(),c(f,{key:1,class:"text-center q-py-lg"},{default:e(()=>[a(h,null,{default:e(()=>[a(v,{name:"info",size:"3rem",color:"grey-5"}),o("div",fe,s(i(r)("dashboard.noRecentActivity")),1),o("div",he,s(i(r)("dashboard.noRecentActivityDescription")),1)]),_:1})]),_:1}))])]),_:1}))}});export{Ce as default};
