import{a as W,u as X,x,e as F,o as c,f as t,y as $,ax as U,Q as A,h as i,l as P,g as d,t as m,q as u,v as T,az as he,p as w,_ as ne,r as C,C as te,m as ae,aH as oe,n as D,s as J,D as $e,F as Pe,z as we,aF as re,aN as Ve,aS as qe,aT as ke,k as ue,b as Se,ay as Ce}from"./index-DxFtmo9S.js";import{Q as K}from"./QForm-DpY_kvLt.js";import{Q as De}from"./QPage-CqgmpTJy.js";import{supabase as b}from"./supabase-CGduY9fb.js";import{u as de}from"./auth-store-CGPZAGPF.js";import{a as Z,Q as ie}from"./QSelect-BuQxNv4k.js";import{u as Ue,Q as Ee}from"./usePushNotifications-Cpd1E2Bj.js";import{Q as Qe,a as Fe,b as se}from"./QItem-MFkUIApp.js";import{u as Ae}from"./useFriends-B-6_UbCG.js";import{u as Ne}from"./useGroups-DND6HOqu.js";import"./format-CWsRuMk_.js";import"./position-engine-Dork6qO3.js";import"./selection-D1MDbj6s.js";import"./rtl-DFPa-2ov.js";const Ie={class:"q-pa-md"},Me={class:"text-h6 q-mb-md"},Be={class:"q-mb-md"},Ge={key:0,class:"q-mb-md"},Oe={key:1,class:"q-mb-md"},ze={class:"text-h6 q-mb-md"},Le={class:"text-body2 text-grey-6"},Te=W({__name:"NotificationSettings",setup(k){const{t:y}=X(),o=Ue();x(async()=>{await o.initialize()});const p=()=>{switch(o.permission.value){case"granted":return"positive";case"denied":return"negative";default:return"warning"}},_=()=>{switch(o.permission.value){case"granted":return"check_circle";case"denied":return"block";default:return"help"}},n=()=>{switch(o.permission.value){case"granted":return y("notifications.permissionGranted");case"denied":return y("notifications.permissionDenied");default:return y("notifications.permissionDefault")}},B=async()=>{try{await o.requestPermission()}catch{}},g=async()=>{try{await o.subscribe()}catch{}},f=async()=>{try{await o.unsubscribe()}catch{}};return(s,v)=>(c(),F("div",Ie,[t(A,{class:"q-mb-md"},{default:i(()=>[t(P,null,{default:i(()=>[d("div",Me,m(s.$t("notifications.title")),1),d("div",Be,[t(Z,{color:u(o).isSupported.value?"positive":"negative","text-color":"white",icon:u(o).isSupported.value?"check_circle":"error"},{default:i(()=>[T(m(u(o).isSupported.value?s.$t("notifications.supported"):s.$t("notifications.notSupported")),1)]),_:1},8,["color","icon"])]),u(o).isSupported.value?(c(),F("div",Ge,[t(Z,{color:p(),"text-color":"white",icon:_()},{default:i(()=>[T(m(n()),1)]),_:1},8,["color","icon"])])):U("",!0),u(o).isSupported.value?(c(),F("div",Oe,[t(Z,{color:u(o).isSubscribed.value?"positive":"grey","text-color":"white",icon:u(o).isSubscribed.value?"notifications_active":"notifications_off"},{default:i(()=>[T(m(u(o).isSubscribed.value?s.$t("notifications.subscribed"):s.$t("notifications.notSubscribed")),1)]),_:1},8,["color","icon"])])):U("",!0)]),_:1}),u(o).isSupported.value?(c(),$(he,{key:0,align:"around"},{default:i(()=>[u(o).needsPermission?(c(),$(w,{key:0,color:"primary",icon:"notifications",label:s.$t("notifications.requestPermission"),onClick:B,loading:u(o).isLoading.value},null,8,["label","loading"])):U("",!0),u(o).canSubscribe&&!u(o).isSubscribed.value?(c(),$(w,{key:1,color:"positive",icon:"notifications_active",label:s.$t("notifications.subscribe"),onClick:g,loading:u(o).isLoading.value},null,8,["label","loading"])):U("",!0),u(o).isSubscribed?(c(),$(w,{key:2,color:"negative",icon:"notifications_off",label:s.$t("notifications.unsubscribe"),onClick:f,loading:u(o).isLoading.value},null,8,["label","loading"])):U("",!0)]),_:1})):U("",!0)]),_:1}),u(o).isSubscribed?(c(),$(A,{key:0},{default:i(()=>[t(P,null,{default:i(()=>[d("div",ze,m(s.$t("notifications.history")),1),d("div",Le,m(s.$t("notifications.historyEmpty")),1)]),_:1})]),_:1})):U("",!0)]))}}),Ye=ne(Te,[["__scopeId","data-v-9ba282eb"]]),je=()=>{const k=C(!1),y=async(g,f)=>{k.value=!0;try{const s=f.email||`dummy-${crypto.randomUUID().slice(0,8)}@dummy.local`,{data:v,error:Q}=await b.from("profiles").insert({id:crypto.randomUUID(),email:s,name:f.name,surname:f.surname||null,username:f.username||null,date_of_birth:f.date_of_birth||null,birth_year_visible:f.birth_year_visible??!1,is_dummy:!0}).select().single();if(Q||!v)throw Q||new Error("Failed to create dummy profile");const{error:V}=await b.from("dummy_profile_managers").insert({dummy_profile_id:v.id,manager_user_id:g});if(V)throw await b.from("profiles").delete().eq("id",v.id),V;const{error:I}=await b.from("friendships").insert({user_id:g,friend_id:v.id,status:"accepted"});if(I)throw await b.from("profiles").delete().eq("id",v.id),I;return{data:v,error:null}}catch(s){return console.error("Error creating dummy profile:",s),{data:null,error:s}}finally{k.value=!1}},o=async g=>{k.value=!0;try{const{data:f,error:s}=await b.from("dummy_profile_managers").select("dummy_profile_id").eq("manager_user_id",g);if(s)throw s;const v=(f||[]).map(r=>r.dummy_profile_id);if(v.length===0)return{data:[],error:null};const{data:Q,error:V}=await b.from("profiles_public").select("*").in("id",v);if(V)throw V;return{data:Q||[],error:null}}catch(f){return console.error("Error fetching managed dummy profiles:",f),{data:null,error:f}}finally{k.value=!1}},p=async(g,f)=>{k.value=!0;try{const{data:s,error:v}=await b.from("profiles").update(f).eq("id",g).eq("is_dummy",!0).select().single();if(v)throw v;return{data:s,error:null}}catch(s){return console.error("Error updating dummy profile:",s),{data:null,error:s}}finally{k.value=!1}},_=async(g,f)=>{k.value=!0;try{const{data:s}=await b.from("dummy_profile_managers").select("id").eq("dummy_profile_id",g).eq("manager_user_id",f).single();if(!s)throw new Error("You do not have permission to delete this dummy profile");const{error:v}=await b.from("profiles").delete().eq("id",g).eq("is_dummy",!0);if(v)throw v;return{error:null}}catch(s){return console.error("Error deleting dummy profile:",s),{error:s}}finally{k.value=!1}},n=async(g,f)=>{try{const{data:s}=await b.from("dummy_profile_managers").select("id").eq("dummy_profile_id",g).eq("manager_user_id",f).single();return!!s}catch{return!1}};return{isLoading:k,createDummyProfile:y,fetchManagedDummyProfiles:o,updateDummyProfile:p,deleteDummyProfile:_,canManageDummyProfile:n,suggestDummyProfileAsFriend:async(g,f,s)=>{k.value=!0;try{if(!await n(g,s))throw new Error("You do not have permission to suggest this dummy profile");const{data:Q,error:V}=await b.from("friendships").insert({user_id:g,friend_id:f,status:"pending"}).select().single();if(V)throw V;return{data:Q,error:null}}catch(v){return console.error("Error suggesting dummy profile as friend:",v),{data:null,error:v}}finally{k.value=!1}}}},He={class:"text-h6 q-mb-md"},Re={class:"text-body2 text-grey-7"},Ze={class:"text-subtitle1 q-mb-md"},Je={class:"row q-gutter-sm"},Ke={class:"text-subtitle1 q-mb-md"},We={class:"q-gutter-md"},Xe={class:"col"},xe={class:"text-subtitle2"},el={key:0,class:"text-caption text-grey-7"},ll={key:1,class:"text-caption text-grey-7"},tl={key:2,class:"text-caption text-grey-7"},al={class:"col-auto"},ol={class:"text-center text-grey-7 q-py-lg"},rl={class:"text-h6"},il={class:"row q-gutter-sm justify-end"},sl={class:"text-h6"},nl={class:"row q-gutter-sm justify-end q-mt-sm"},ul=W({__name:"DummyProfileManager",setup(k){const y=ue(),{t:o}=X(),p=de(),_=te(()=>p.user),{isLoading:n,createDummyProfile:B,fetchManagedDummyProfiles:g,updateDummyProfile:f,deleteDummyProfile:s,suggestDummyProfileAsFriend:v}=je(),{fetchEligibleUsersForDummySuggestion:Q}=Ae(),{groups:V,fetchGroups:I,fetchGroupMembers:r,membersByGroup:E}=Ne(),q=C(!1),z=C(!1),L=C(!1),Y=C([]),h=C(null),G=C(null),ee=C([]),M=C(null),R=C(!1),O=C("person"),N=C(null),me=te(()=>V.value.map(e=>({label:e.name,value:e.id}))),S=C({name:"",surname:"",username:"",email:"",date_of_birth:"",birth_year_visible:!1}),fe=()=>{S.value={name:"",surname:"",username:"",email:"",date_of_birth:"",birth_year_visible:!1}},le=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),ce=e=>new Date(e).toLocaleDateString(),j=async()=>{if(!_.value?.id)return;const{data:e}=await g(_.value.id);e&&(Y.value=e)},ve=async()=>{if(!_.value?.id)return;const{data:e,error:a}=await B(_.value.id,S.value);if(a){y.notify({color:"negative",message:o("dummyProfiles.errors.createFailed"),icon:"error"});return}e&&(y.notify({color:"positive",message:o("dummyProfiles.messages.created"),icon:"check"}),fe(),q.value=!1,await j())},pe=e=>{h.value={...e},z.value=!0},ye=async()=>{if(!h.value)return;const{data:e,error:a}=await f(h.value.id,h.value);if(a){y.notify({color:"negative",message:o("dummyProfiles.errors.updateFailed"),icon:"error"});return}e&&(y.notify({color:"positive",message:o("dummyProfiles.messages.updated"),icon:"check"}),z.value=!1,await j())},be=e=>{y.dialog({title:o("dummyProfiles.confirmDelete.title"),message:o("dummyProfiles.confirmDelete.message",{name:e.name}),cancel:!0,persistent:!0}).onOk(()=>{(async()=>{if(!_.value?.id)return;const{error:a}=await s(e.id,_.value.id);if(a){y.notify({color:"negative",message:o("dummyProfiles.errors.deleteFailed"),icon:"error"});return}y.notify({color:"positive",message:o("dummyProfiles.messages.deleted"),icon:"check"}),await j()})()})},ge=async e=>{if(G.value=e,R.value=!0,L.value=!0,O.value="person",M.value=null,N.value=null,_.value?.id){const{data:a}=await Q(e.id,_.value.id);a&&(ee.value=a)}R.value=!1},_e=async()=>{if(!(!_.value?.id||!G.value))try{if(O.value==="person"){if(!M.value)return;const{error:e}=await v(G.value.id,M.value,_.value.id);if(e){const a=typeof e=="string"?e:e instanceof Error?e.message:"suggest-error";throw new Error(a)}y.notify({color:"positive",message:o("dummyProfiles.messages.suggested"),icon:"check"})}else{if(!N.value)return;await r(N.value);const e=E.value[N.value]||[];let a=0;for(const l of e){if(l.user_id===G.value.id)continue;const{error:H}=await v(G.value.id,l.user_id,_.value.id);H||a++}y.notify({color:"positive",message:o("dummyProfiles.messages.groupSuggested",{count:a}),icon:"check"})}}catch{y.notify({color:"negative",message:o("dummyProfiles.errors.suggestionFailed"),icon:"error"});return}finally{L.value=!1,M.value=null,N.value=null,G.value=null}};return x(async()=>{await j(),await I()}),(e,a)=>(c(),$(A,{class:"dummy-profile-manager"},{default:i(()=>[t(P,null,{default:i(()=>[d("div",He,m(e.$t("dummyProfiles.title")),1),d("p",Re,m(e.$t("dummyProfiles.description")),1)]),_:1}),t(ae),q.value?(c(),$(P,{key:0},{default:i(()=>[d("div",Ze,m(e.$t("dummyProfiles.createNew")),1),t(K,{onSubmit:oe(ve,["prevent"]),class:"q-gutter-md"},{default:i(()=>[t(D,{modelValue:S.value.name,"onUpdate:modelValue":a[0]||(a[0]=l=>S.value.name=l),label:e.$t("dummyProfiles.form.name"),filled:"",rules:[l=>!!l||e.$t("validation.required")],required:""},null,8,["modelValue","label","rules"]),t(D,{modelValue:S.value.surname,"onUpdate:modelValue":a[1]||(a[1]=l=>S.value.surname=l),label:e.$t("dummyProfiles.form.surname"),filled:""},null,8,["modelValue","label"]),t(D,{modelValue:S.value.username,"onUpdate:modelValue":a[2]||(a[2]=l=>S.value.username=l),label:e.$t("dummyProfiles.form.username"),filled:"",hint:e.$t("dummyProfiles.form.usernameHint")},null,8,["modelValue","label","hint"]),t(D,{modelValue:S.value.email,"onUpdate:modelValue":a[3]||(a[3]=l=>S.value.email=l),label:e.$t("dummyProfiles.form.email"),type:"email",filled:"",hint:e.$t("dummyProfiles.form.emailHint"),rules:[l=>!l||le(l)||e.$t("validation.invalidEmail")]},null,8,["modelValue","label","hint","rules"]),t(D,{modelValue:S.value.date_of_birth,"onUpdate:modelValue":a[4]||(a[4]=l=>S.value.date_of_birth=l),label:e.$t("dummyProfiles.form.dateOfBirth"),type:"date",filled:""},null,8,["modelValue","label"]),t(J,{modelValue:S.value.birth_year_visible,"onUpdate:modelValue":a[5]||(a[5]=l=>S.value.birth_year_visible=l),label:e.$t("dummyProfiles.form.birthYearVisible")},null,8,["modelValue","label"]),d("div",Je,[t(w,{type:"submit",color:"primary",label:e.$t("common.create"),loading:u(n)},null,8,["label","loading"]),t(w,{flat:"",label:e.$t("common.cancel"),onClick:a[6]||(a[6]=l=>q.value=!1)},null,8,["label"])])]),_:1})]),_:1})):(c(),$(P,{key:1},{default:i(()=>[t(w,{color:"primary",label:e.$t("dummyProfiles.createNew"),icon:"add",onClick:a[7]||(a[7]=l=>q.value=!0)},null,8,["label"])]),_:1})),Y.value.length>0?(c(),$(ae,{key:2})):U("",!0),Y.value.length>0?(c(),$(P,{key:3},{default:i(()=>[d("div",Ke,m(e.$t("dummyProfiles.yourProfiles")),1),d("div",We,[(c(!0),F(Pe,null,$e(Y.value,l=>(c(),$(A,{key:l.id,flat:"",bordered:"",class:"dummy-profile-item"},{default:i(()=>[t(P,{class:"row items-center"},{default:i(()=>[d("div",Xe,[d("div",xe,m(l.name)+" "+m(l.surname),1),l.username?(c(),F("div",el," @"+m(l.username),1)):U("",!0),l.email&&!l.email.includes("@dummy.local")?(c(),F("div",ll,m(l.email),1)):U("",!0),l.date_of_birth?(c(),F("div",tl,m(ce(l.date_of_birth)),1)):U("",!0)]),d("div",al,[t(Ee,{flat:""},{default:i(()=>[t(w,{flat:"",icon:"edit",size:"sm",title:e.$t("common.edit"),onClick:H=>pe(l)},null,8,["title","onClick"]),t(w,{flat:"",icon:"share",size:"sm",title:e.$t("dummyProfiles.suggestAsFriend"),onClick:H=>ge(l)},null,8,["title","onClick"]),t(w,{flat:"",icon:"delete",size:"sm",color:"negative",title:e.$t("common.delete"),onClick:H=>be(l)},null,8,["title","onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))])]),_:1})):q.value?U("",!0):(c(),$(P,{key:4},{default:i(()=>[d("div",ol,[t(we,{name:"person_add_disabled",size:"3rem",class:"q-mb-md"}),d("div",null,m(e.$t("dummyProfiles.noProfiles")),1)])]),_:1})),t(re,{modelValue:z.value,"onUpdate:modelValue":a[15]||(a[15]=l=>z.value=l),persistent:""},{default:i(()=>[t(A,{style:{width:"400px"}},{default:i(()=>[t(P,null,{default:i(()=>[d("div",rl,m(e.$t("dummyProfiles.editProfile")),1)]),_:1}),h.value?(c(),$(P,{key:0},{default:i(()=>[t(K,{onSubmit:oe(ye,["prevent"]),class:"q-gutter-md"},{default:i(()=>[t(D,{modelValue:h.value.name,"onUpdate:modelValue":a[8]||(a[8]=l=>h.value.name=l),label:e.$t("dummyProfiles.form.name"),filled:"",rules:[l=>!!l||e.$t("validation.required")],required:""},null,8,["modelValue","label","rules"]),t(D,{modelValue:h.value.surname,"onUpdate:modelValue":a[9]||(a[9]=l=>h.value.surname=l),label:e.$t("dummyProfiles.form.surname"),filled:""},null,8,["modelValue","label"]),t(D,{modelValue:h.value.username,"onUpdate:modelValue":a[10]||(a[10]=l=>h.value.username=l),label:e.$t("dummyProfiles.form.username"),filled:""},null,8,["modelValue","label"]),t(D,{modelValue:h.value.email,"onUpdate:modelValue":a[11]||(a[11]=l=>h.value.email=l),label:e.$t("dummyProfiles.form.email"),type:"email",filled:"",hint:e.$t("dummyProfiles.form.emailHint"),rules:[l=>!l||le(l)||e.$t("validation.invalidEmail")]},null,8,["modelValue","label","hint","rules"]),t(D,{modelValue:h.value.date_of_birth,"onUpdate:modelValue":a[12]||(a[12]=l=>h.value.date_of_birth=l),label:e.$t("dummyProfiles.form.dateOfBirth"),type:"date",filled:""},null,8,["modelValue","label"]),t(J,{modelValue:h.value.birth_year_visible,"onUpdate:modelValue":a[13]||(a[13]=l=>h.value.birth_year_visible=l),label:e.$t("dummyProfiles.form.birthYearVisible")},null,8,["modelValue","label"]),d("div",il,[t(w,{flat:"",label:e.$t("common.cancel"),onClick:a[14]||(a[14]=l=>z.value=!1)},null,8,["label"]),t(w,{type:"submit",color:"primary",label:e.$t("common.save"),loading:u(n)},null,8,["label","loading"])])]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1},8,["modelValue"]),t(re,{modelValue:L.value,"onUpdate:modelValue":a[20]||(a[20]=l=>L.value=l),persistent:""},{default:i(()=>[t(A,{style:{width:"460px"}},{default:i(()=>[t(P,null,{default:i(()=>[d("div",sl,m(e.$t("dummyProfiles.suggestProfile")),1)]),_:1}),t(P,{class:"q-gutter-md"},{default:i(()=>[t(Ve,{modelValue:O.value,"onUpdate:modelValue":a[16]||(a[16]=l=>O.value=l),type:"radio",options:[{label:e.$t("dummyProfiles.target.person"),value:"person"},{label:e.$t("dummyProfiles.target.group"),value:"group"}]},null,8,["modelValue","options"]),O.value==="person"?(c(),$(ie,{key:0,modelValue:M.value,"onUpdate:modelValue":a[17]||(a[17]=l=>M.value=l),options:ee.value,label:e.$t("dummyProfiles.selectFriend"),"option-label":"name","option-value":"id",filled:"","emit-value":"","map-options":"",loading:R.value},{option:i(l=>[t(Qe,qe(ke(l.itemProps)),{default:i(()=>[t(Fe,null,{default:i(()=>[t(se,null,{default:i(()=>[T(m(l.opt.name)+" "+m(l.opt.surname),1)]),_:2},1024),t(se,{caption:""},{default:i(()=>[T(m(l.opt.email),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label","loading"])):(c(),$(ie,{key:1,modelValue:N.value,"onUpdate:modelValue":a[18]||(a[18]=l=>N.value=l),options:me.value,label:e.$t("dummyProfiles.selectGroup"),"option-label":"label","option-value":"value","emit-value":"","map-options":"",filled:"",disable:u(V).length===0,hint:u(V).length===0?e.$t("dummyProfiles.noGroups"):""},null,8,["modelValue","options","label","disable","hint"])),d("div",nl,[t(w,{flat:"",label:e.$t("common.cancel"),onClick:a[19]||(a[19]=l=>L.value=!1)},null,8,["label"]),t(w,{color:"primary",label:e.$t("dummyProfiles.sendSuggestion"),loading:u(n),disable:O.value==="person"?!M.value:!N.value,onClick:_e},null,8,["label","loading","disable"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),dl=ne(ul,[["__scopeId","data-v-71ee0f06"]]),ml={class:"text-h4 q-mb-md"},fl={class:"row justify-center"},cl={class:"col-12 col-md-6"},vl=["src"],pl={key:1},yl={class:"text-h5 q-mt-md"},bl={key:0,class:"text-subtitle1 text-grey-6"},gl={class:"text-body2 text-grey-7"},_l={class:"row justify-end q-gutter-sm"},hl={class:"text-h6 q-mb-md"},$l={class:"q-mt-md"},Pl={class:"text-h6 text-negative q-mb-sm"},wl={class:"text-body2 q-mb-md"},Bl=W({__name:"ProfilePage",setup(k){const y=ue(),{t:o}=X(),p=de(),_=C(!1),n=Se({name:"",surname:"",username:"",date_of_birth:"",birth_year_visible:!1}),B=r=>r?r.name&&r.surname?`${r.name} ${r.surname}`:r.username||r.email:"",g=r=>r?r.name&&r.surname?`${r.name.charAt(0)}${r.surname.charAt(0)}`:r.username?r.username.charAt(0).toUpperCase():r.email.charAt(0).toUpperCase():"",f=r=>n.username?!0:!!r||o("profile.validationError"),s=r=>n.name&&n.surname?!0:!!r||o("profile.validationError"),v=async()=>{if(p.profile){_.value=!0;try{const r=p.profile.id;await b.from("wishes").delete().or(`created_for_user_id.eq.${r},created_by_user_id.eq.${r}`),await b.from("friendships").delete().or(`user_id.eq.${r},friend_id.eq.${r}`),await b.from("group_members").delete().eq("user_id",r),await b.from("groups").delete().eq("creator_id",r),await b.from("wish_group_rules").delete().in("wish_id",[]),await b.from("notifications").delete().eq("user_id",r),await b.from("push_subscriptions").delete().eq("user_id",r),await b.from("dummy_profile_managers").delete().or(`dummy_profile_id.eq.${r},manager_user_id.eq.${r}`),await b.from("profiles").delete().eq("id",r),await p.signOut(),y.notify({type:"positive",message:o("profile.deleted")})}catch(r){console.error("Delete account error",r),y.notify({type:"negative",message:o("profile.deleteError")})}finally{_.value=!1}}},Q=()=>{y.dialog({title:o("profile.deleteConfirmTitle"),message:o("profile.deleteConfirmMessage"),cancel:!0,persistent:!0,ok:{label:o("common.delete"),color:"negative"}}).onOk(()=>{v()})},V=()=>{p.profile&&(n.name=p.profile.name||"",n.surname=p.profile.surname||"",n.username=p.profile.username||"",n.date_of_birth=p.profile.date_of_birth||"",n.birth_year_visible=p.profile.birth_year_visible??!1)},I=async()=>{if(!n.username&&(!n.name||!n.surname)){y.notify({type:"negative",message:o("profile.validationError")});return}const r={name:n.name||null,surname:n.surname||null,username:n.username||null,date_of_birth:n.date_of_birth||null,birth_year_visible:n.birth_year_visible};await p.updateProfile(r)?y.notify({type:"positive",message:o("profile.updateSuccess")}):y.notify({type:"negative",message:o("profile.updateError")})};return x(()=>{V()}),(r,E)=>(c(),$(De,{class:"q-pa-md"},{default:i(()=>[d("div",ml,m(r.$t("profile.title")),1),d("div",fl,[d("div",cl,[t(A,null,{default:i(()=>[t(P,{class:"text-center"},{default:i(()=>[t(Ce,{size:"100px",color:"primary","text-color":"white"},{default:i(()=>[u(p).profile?.avatar_url?(c(),F("img",{key:0,src:u(p).profile.avatar_url},null,8,vl)):(c(),F("span",pl,m(g(u(p).profile)),1))]),_:1}),d("div",yl,m(B(u(p).profile)),1),u(p).profile?.username?(c(),F("div",bl," @"+m(u(p).profile.username),1)):U("",!0),d("div",gl,m(u(p).profile?.email),1)]),_:1}),t(P,null,{default:i(()=>[t(K,{onSubmit:I,class:"q-gutter-md"},{default:i(()=>[t(D,{modelValue:n.name,"onUpdate:modelValue":E[0]||(E[0]=q=>n.name=q),label:r.$t("common.name"),outlined:"",rules:[f]},null,8,["modelValue","label","rules"]),t(D,{modelValue:n.surname,"onUpdate:modelValue":E[1]||(E[1]=q=>n.surname=q),label:r.$t("common.surname"),outlined:"",rules:[f]},null,8,["modelValue","label","rules"]),t(D,{modelValue:n.username,"onUpdate:modelValue":E[2]||(E[2]=q=>n.username=q),label:r.$t("common.username"),outlined:"",rules:[s]},null,8,["modelValue","label","rules"]),t(D,{modelValue:n.date_of_birth,"onUpdate:modelValue":E[3]||(E[3]=q=>n.date_of_birth=q),label:r.$t("profile.dateOfBirth"),type:"date",outlined:""},null,8,["modelValue","label"]),t(J,{modelValue:n.birth_year_visible,"onUpdate:modelValue":E[4]||(E[4]=q=>n.birth_year_visible=q),label:r.$t("profile.showBirthYear")},null,8,["modelValue","label"]),d("div",_l,[t(w,{label:r.$t("common.cancel"),color:"grey",flat:"",onClick:V},null,8,["label"]),t(w,{type:"submit",label:r.$t("common.save"),color:"primary",loading:u(p).isLoading},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1}),t(A,{class:"q-mt-md"},{default:i(()=>[t(P,null,{default:i(()=>[d("div",hl,m(r.$t("notifications.title")),1),t(Ye)]),_:1})]),_:1}),d("div",$l,[t(dl)]),t(A,{class:"q-mt-lg"},{default:i(()=>[t(P,null,{default:i(()=>[d("div",Pl,m(u(o)("profile.dangerZone")),1),d("div",wl,m(u(o)("profile.deleteInfo")),1),t(w,{color:"negative",label:u(o)("profile.deleteAccount"),loading:_.value,onClick:Q},null,8,["label","loading"])]),_:1})]),_:1})])])]),_:1}))}});export{Bl as default};
