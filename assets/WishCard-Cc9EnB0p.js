import{a as D}from"./QSelect-_uqFViso.js";import{v as q,J as A,y as S,aE as z,a as H,r as R,x as w,p as f,o,Q as W,f as C,e as p,h as c,c as E,at as u,t as $,k as b,aD as y,g as N,a3 as j,aH as F,aw as O}from"./index-CMeCmwpZ.js";import{u as V}from"./use-quasar-DTpZL-V_.js";import{u as Y}from"./vue-i18n.runtime-DAEfigwX.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J=q({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(v,{slots:I,emit:s}){let m=!1,_,r,i=null,a=null,l,k;function g(){_?.(),_=null,m=!1,i!==null&&(clearTimeout(i),i=null),a!==null&&(clearTimeout(a),a=null),r?.removeEventListener("transitionend",l),l=null}function B(t,n,d){n!==void 0&&(t.style.height=`${n}px`),t.style.transition=`height ${v.duration}ms cubic-bezier(.25, .8, .50, 1)`,m=!0,_=d}function T(t,n){t.style.overflowY=null,t.style.height=null,t.style.transition=null,g(),n!==k&&s(n)}function Q(t,n){let d=0;r=t,m===!0?(g(),d=t.offsetHeight===t.scrollHeight?0:void 0):(k="hide",t.style.overflowY="hidden"),B(t,d,n),i=setTimeout(()=>{i=null,t.style.height=`${t.scrollHeight}px`,l=e=>{a=null,(Object(e)!==e||e.target===t)&&T(t,"show")},t.addEventListener("transitionend",l),a=setTimeout(l,v.duration*1.1)},100)}function U(t,n){let d;r=t,m===!0?g():(k="show",t.style.overflowY="hidden",d=t.scrollHeight),B(t,d,n),i=setTimeout(()=>{i=null,t.style.height=0,l=e=>{a=null,(Object(e)!==e||e.target===t)&&T(t,"hide")},t.addEventListener("transitionend",l),a=setTimeout(l,v.duration*1.1)},100)}return A(()=>{m===!0&&g()}),()=>S(z,{css:!1,appear:v.appear,onEnter:Q,onLeave:U},I.default)}}),M={class:"row items-center justify-between"},Z={class:"text-h6 wish-title"},G={class:"row items-center q-gutter-xs"},K={key:0,class:"text-body2 text-grey-7 q-mt-xs preview-text"},X={class:"row q-gutter-xs q-mb-md"},x={key:0,class:"wish-description q-mb-md"},ee={class:"text-body2 text-grey-7"},te={key:1,class:"wish-url q-mb-md"},se={class:"wish-meta"},ie={class:"text-caption text-grey-6"},re={key:0},ne=H({__name:"WishCard",props:{wish:{},currentUserId:{}},emits:["edit","delete","toggleBought","toggleReceived"],setup(v,{emit:I}){const s=v,m=I,_=V(),{t:r}=Y(),i=R(!1),a=()=>{i.value=!i.value},l=w(()=>{switch(s.wish.visibility){case"public":return"green";case"friends":return"blue";case"private":return"grey";default:return"grey"}}),k=w(()=>{switch(s.wish.visibility){case"public":return r("wishes.visibilityPublic");case"friends":return r("wishes.visibilityFriends");case"private":return r("wishes.visibilityPrivate");default:return r("common.unknown")}}),g=w(()=>s.wish.created_by_user_id!==s.wish.created_for_user_id&&s.currentUserId!==s.wish.created_for_user_id),B=()=>{const e=s.wish.created_by_user;return e.name&&e.surname?`${e.name} ${e.surname}`:e.name?e.name:e.username?e.username:r("common.unknown")},T=w(()=>s.currentUserId===s.wish.created_by_user_id),Q=w(()=>s.currentUserId===s.wish.created_by_user_id),U=w(()=>s.currentUserId!==s.wish.created_for_user_id&&s.currentUserId!==void 0),t=w(()=>s.currentUserId===s.wish.created_for_user_id&&s.currentUserId!==void 0),n=e=>new Date(e).toLocaleDateString("cs-CZ"),d=()=>{_.dialog({title:r("wishes.deleteWish"),message:r("wishes.deleteConfirm"),cancel:!0,persistent:!0}).onOk(()=>{m("delete",s.wish.id)})};return(e,h)=>(o(),f(W,{class:"wish-card",onClick:a},{default:C(()=>[p(N,{class:"wish-card-header"},{default:C(()=>[c("div",M,[c("div",Z,$(e.wish.name),1),c("div",G,[e.wish.is_bought?(o(),f(D,{key:0,color:"green","text-color":"white",label:e.$t("wishes.bought"),size:"sm"},null,8,["label"])):u("",!0),e.wish.is_received?(o(),f(D,{key:1,color:"purple","text-color":"white",label:e.$t("wishes.received"),size:"sm"},null,8,["label"])):u("",!0),p(b,{flat:"",round:"",dense:"",icon:i.value?"expand_less":"expand_more",onClick:y(a,["stop"])},null,8,["icon"])])]),!i.value&&e.wish.description?(o(),E("div",K,$(e.wish.description),1)):u("",!0)]),_:1}),p(J,null,{default:C(()=>[j(c("div",null,[p(N,{class:"wish-card-details"},{default:C(()=>[c("div",X,[p(D,{color:l.value,"text-color":"white",label:k.value,size:"sm"},null,8,["color","label"])]),e.wish.description?(o(),E("div",x,[c("div",ee,$(e.wish.description),1)])):u("",!0),e.wish.url?(o(),E("div",te,[p(b,{flat:"",color:"primary",href:e.wish.url,target:"_blank",icon:"open_in_new",label:e.$t("wishes.openLink"),size:"sm",onClick:h[0]||(h[0]=y(()=>{},["stop"]))},null,8,["href","label"])])):u("",!0),c("div",se,[c("div",ie,[g.value?(o(),E("div",re,$(e.$t("wishes.createdBy",{name:B()})),1)):u("",!0),c("div",null,$(e.wish.created_at?n(e.wish.created_at):"N/A"),1)])])]),_:1}),p(O,{align:"right"},{default:C(()=>[U.value?(o(),f(b,{key:0,color:e.wish.is_bought?"grey":"green",icon:e.wish.is_bought?"shopping_cart":"add_shopping_cart",label:e.wish.is_bought?e.$t("wishes.markAsNotBought"):e.$t("wishes.markAsBought"),flat:"",onClick:h[1]||(h[1]=y(L=>e.$emit("toggleBought",e.wish.id),["stop"]))},null,8,["color","icon","label"])):u("",!0),t.value?(o(),f(b,{key:1,color:e.wish.is_received?"orange":"purple",icon:e.wish.is_received?"undo":"check_circle",label:e.wish.is_received?e.$t("wishes.markAsNotReceived"):e.$t("wishes.markAsReceived"),flat:"",onClick:h[2]||(h[2]=y(L=>e.$emit("toggleReceived",e.wish.id),["stop"]))},null,8,["color","icon","label"])):u("",!0),T.value?(o(),f(b,{key:2,color:"primary",icon:"edit",flat:"",onClick:h[3]||(h[3]=y(L=>e.$emit("edit",e.wish),["stop"]))})):u("",!0),Q.value?(o(),f(b,{key:3,color:"negative",icon:"delete",flat:"",onClick:y(d,["stop"])})):u("",!0)]),_:1})],512),[[F,i.value]])]),_:1})]),_:1}))}}),ce=P(ne,[["__scopeId","data-v-84c2fd09"]]);export{ce as W};
