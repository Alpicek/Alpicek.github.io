import{Q as b}from"./QChip-DsLmkw4c.js";import{a as N,r as $,m as q,c as p,o as s,e as a,n as c,at as o,Q as v,w as n,f as _,g as l,t as r,k as e,ak as m,aw as P,j as u}from"./index-DcT2ux80.js";import{u as Q}from"./usePushNotifications-Nt4zb2im.js";import{u as T}from"./vue-i18n.runtime-EzKfoaH7.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"q-pa-md"},V={class:"text-h6 q-mb-md"},D={class:"q-mb-md"},I={key:0,class:"q-mb-md"},x={key:1,class:"q-mb-md"},E={class:"text-h6 q-mb-md"},j={class:"text-body2 text-grey-6"},z=N({__name:"NotificationSettings",setup(A){const{t:d}=T(),i=Q(),f=$(!1);q(async()=>{await i.initialize()});const g=()=>{switch(i.permission.value){case"granted":return"positive";case"denied":return"negative";default:return"warning"}},h=()=>{switch(i.permission.value){case"granted":return"check_circle";case"denied":return"block";default:return"help"}},y=()=>{switch(i.permission.value){case"granted":return d("notifications.permissionGranted");case"denied":return d("notifications.permissionDenied");default:return d("notifications.permissionDefault")}},k=async()=>{try{await i.requestPermission()}catch{}},S=async()=>{try{await i.subscribe()}catch{}},w=async()=>{try{await i.unsubscribe()}catch{}},C=async()=>{f.value=!0;try{await i.sendTestNotification()}catch{}finally{f.value=!1}};return(t,G)=>(s(),p("div",L,[a(v,{class:"q-mb-md"},{default:n(()=>[a(_,null,{default:n(()=>[l("div",V,r(t.$t("notifications.title")),1),l("div",D,[a(b,{color:e(i).isSupported.value?"positive":"negative","text-color":"white",icon:e(i).isSupported.value?"check_circle":"error"},{default:n(()=>[m(r(e(i).isSupported.value?t.$t("notifications.supported"):t.$t("notifications.notSupported")),1)]),_:1},8,["color","icon"])]),e(i).isSupported.value?(s(),p("div",I,[a(b,{color:g(),"text-color":"white",icon:h()},{default:n(()=>[m(r(y()),1)]),_:1},8,["color","icon"])])):o("",!0),e(i).isSupported.value?(s(),p("div",x,[a(b,{color:e(i).isSubscribed.value?"positive":"grey","text-color":"white",icon:e(i).isSubscribed.value?"notifications_active":"notifications_off"},{default:n(()=>[m(r(e(i).isSubscribed.value?t.$t("notifications.subscribed"):t.$t("notifications.notSubscribed")),1)]),_:1},8,["color","icon"])])):o("",!0)]),_:1}),e(i).isSupported.value?(s(),c(P,{key:0,align:"around"},{default:n(()=>[e(i).needsPermission?(s(),c(u,{key:0,color:"primary",icon:"notifications",label:t.$t("notifications.requestPermission"),onClick:k,loading:e(i).isLoading.value},null,8,["label","loading"])):o("",!0),e(i).canSubscribe&&!e(i).isSubscribed.value?(s(),c(u,{key:1,color:"positive",icon:"notifications_active",label:t.$t("notifications.subscribe"),onClick:S,loading:e(i).isLoading.value},null,8,["label","loading"])):o("",!0),e(i).isSubscribed?(s(),c(u,{key:2,color:"negative",icon:"notifications_off",label:t.$t("notifications.unsubscribe"),onClick:w,loading:e(i).isLoading.value},null,8,["label","loading"])):o("",!0),e(i).isSubscribed?(s(),c(u,{key:3,color:"secondary",icon:"send",label:t.$t("notifications.sendTest"),onClick:C,loading:f.value},null,8,["label","loading"])):o("",!0)]),_:1})):o("",!0)]),_:1}),e(i).isSubscribed?(s(),c(v,{key:0},{default:n(()=>[a(_,null,{default:n(()=>[l("div",E,r(t.$t("notifications.history")),1),l("div",j,r(t.$t("notifications.historyEmpty")),1)]),_:1})]),_:1})):o("",!0)]))}}),O=B(z,[["__scopeId","data-v-2b373465"]]);export{O as N};
