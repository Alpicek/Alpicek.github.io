import{a as N}from"./QSelect-nDTDzA6N.js";import{y as A,L as D,A as S,aG as R,a as F,r as H,n as W,w as j,z as p,p as g,o as a,Q as O,ak as P,f as $,e as f,h,c as I,at as d,t as B,k as b,aF as _,g as z,a4 as V,aJ as Y,aw as M}from"./index-D27XNSYz.js";import{u as G}from"./use-quasar-BotVfJR3.js";import{u as J}from"./vue-i18n.runtime-D6Rwe0Ae.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K=A({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(v,{slots:L,emit:s}){let w=!1,k,r,i=null,l=null,n,C;function y(){k?.(),k=null,w=!1,i!==null&&(clearTimeout(i),i=null),l!==null&&(clearTimeout(l),l=null),r?.removeEventListener("transitionend",n),n=null}function T(t,o,u){o!==void 0&&(t.style.height=`${o}px`),t.style.transition=`height ${v.duration}ms cubic-bezier(.25, .8, .50, 1)`,w=!0,k=u}function E(t,o){t.style.overflowY=null,t.style.height=null,t.style.transition=null,y(),o!==C&&s(o)}function Q(t,o){let u=0;r=t,w===!0?(y(),u=t.offsetHeight===t.scrollHeight?0:void 0):(C="hide",t.style.overflowY="hidden"),T(t,u,o),i=setTimeout(()=>{i=null,t.style.height=`${t.scrollHeight}px`,n=c=>{l=null,(Object(c)!==c||c.target===t)&&E(t,"show")},t.addEventListener("transitionend",n),l=setTimeout(n,v.duration*1.1)},100)}function U(t,o){let u;r=t,w===!0?y():(C="show",t.style.overflowY="hidden",u=t.scrollHeight),T(t,u,o),i=setTimeout(()=>{i=null,t.style.height=0,n=c=>{l=null,(Object(c)!==c||c.target===t)&&E(t,"hide")},t.addEventListener("transitionend",n),l=setTimeout(n,v.duration*1.1)},100)}return D(()=>{w===!0&&y()}),()=>S(R,{css:!1,appear:v.appear,onEnter:Q,onLeave:U},L.default)}}),X={class:"row items-center justify-between"},x={class:"text-h6 wish-title"},ee={class:"row items-center q-gutter-xs"},te={key:0,class:"text-body2 text-grey-7 q-mt-xs preview-text"},se={class:"row q-gutter-xs q-mb-md"},ie={key:0,class:"wish-description q-mb-md"},re={class:"text-body2 text-grey-7"},ne={key:1,class:"wish-url q-mb-md"},oe={class:"wish-meta"},ae={class:"text-caption text-grey-6"},le={key:0},de=F({__name:"WishCard",props:{wish:{},currentUserId:{},expanded:{type:Boolean},highlight:{type:Boolean}},emits:["edit","delete","toggleBought","toggleReceived"],setup(v,{emit:L}){const s=v,w=L,k=G(),{t:r}=J(),i=H(!1),l=()=>{typeof s.expanded=="boolean"&&(i.value=s.expanded)};W(l),j(()=>s.expanded,()=>l());const n=()=>{i.value=!i.value},C=p(()=>{switch(s.wish.visibility){case"public":return"green";case"friends":return"blue";case"private":return"grey";default:return"grey"}}),y=p(()=>{switch(s.wish.visibility){case"public":return r("wishes.visibilityPublic");case"friends":return r("wishes.visibilityFriends");case"private":return r("wishes.visibilityPrivate");default:return r("common.unknown")}}),T=p(()=>s.wish.created_by_user_id!==s.wish.created_for_user_id&&s.currentUserId!==s.wish.created_for_user_id),E=()=>{const e=s.wish.created_by_user;return e.name&&e.surname?`${e.name} ${e.surname}`:e.name?e.name:e.username?e.username:r("common.unknown")},Q=p(()=>s.currentUserId===s.wish.created_by_user_id),U=p(()=>s.currentUserId===s.wish.created_by_user_id),t=p(()=>s.currentUserId!==s.wish.created_for_user_id&&s.currentUserId!==void 0),o=p(()=>s.currentUserId===s.wish.created_for_user_id&&s.currentUserId!==void 0),u=e=>new Date(e).toLocaleDateString("cs-CZ"),c=()=>{k.dialog({title:r("wishes.deleteWish"),message:r("wishes.deleteConfirm"),cancel:!0,persistent:!0}).onOk(()=>{w("delete",s.wish.id)})};return(e,m)=>(a(),g(O,{class:P(["wish-card",{"wish-highlight":e.highlight}]),onClick:n},{default:$(()=>[f(z,{class:"wish-card-header"},{default:$(()=>[h("div",X,[h("div",x,B(e.wish.name),1),h("div",ee,[e.wish.is_bought?(a(),g(N,{key:0,color:"green","text-color":"white",label:e.$t("wishes.bought"),size:"sm"},null,8,["label"])):d("",!0),e.wish.is_received?(a(),g(N,{key:1,color:"purple","text-color":"white",label:e.$t("wishes.received"),size:"sm"},null,8,["label"])):d("",!0),f(b,{flat:"",round:"",dense:"",icon:i.value?"expand_less":"expand_more",onClick:_(n,["stop"])},null,8,["icon"])])]),!i.value&&e.wish.description?(a(),I("div",te,B(e.wish.description),1)):d("",!0)]),_:1}),f(K,null,{default:$(()=>[V(h("div",null,[f(z,{class:"wish-card-details"},{default:$(()=>[h("div",se,[f(N,{color:C.value,"text-color":"white",label:y.value,size:"sm"},null,8,["color","label"])]),e.wish.description?(a(),I("div",ie,[h("div",re,B(e.wish.description),1)])):d("",!0),e.wish.url?(a(),I("div",ne,[f(b,{flat:"",color:"primary",href:e.wish.url,target:"_blank",icon:"open_in_new",label:e.$t("wishes.openLink"),size:"sm",onClick:m[0]||(m[0]=_(()=>{},["stop"]))},null,8,["href","label"])])):d("",!0),h("div",oe,[h("div",ae,[T.value?(a(),I("div",le,B(e.$t("wishes.createdBy",{name:E()})),1)):d("",!0),h("div",null,B(e.wish.created_at?u(e.wish.created_at):"N/A"),1)])])]),_:1}),f(M,{align:"right"},{default:$(()=>[t.value?(a(),g(b,{key:0,color:e.wish.is_bought?"grey":"green",icon:e.wish.is_bought?"shopping_cart":"add_shopping_cart",label:e.wish.is_bought?e.$t("wishes.markAsNotBought"):e.$t("wishes.markAsBought"),flat:"",onClick:m[1]||(m[1]=_(q=>e.$emit("toggleBought",e.wish.id),["stop"]))},null,8,["color","icon","label"])):d("",!0),o.value?(a(),g(b,{key:1,color:e.wish.is_received?"orange":"purple",icon:e.wish.is_received?"undo":"check_circle",label:e.wish.is_received?e.$t("wishes.markAsNotReceived"):e.$t("wishes.markAsReceived"),flat:"",onClick:m[2]||(m[2]=_(q=>e.$emit("toggleReceived",e.wish.id),["stop"]))},null,8,["color","icon","label"])):d("",!0),Q.value?(a(),g(b,{key:2,color:"primary",icon:"edit",flat:"",onClick:m[3]||(m[3]=_(q=>e.$emit("edit",e.wish),["stop"]))})):d("",!0),U.value?(a(),g(b,{key:3,color:"negative",icon:"delete",flat:"",onClick:_(c,["stop"])})):d("",!0)]),_:1})],512),[[Y,i.value]])]),_:1})]),_:1},8,["class"]))}}),pe=Z(de,[["__scopeId","data-v-6cd9194a"]]);export{pe as W};
