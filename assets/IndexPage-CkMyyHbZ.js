import{a as z,r as _,n as L,w as N,p as h,f as e,o as u,h as o,t as s,l as i,e as t,g as m,q as p,aw as x,k as y,x as l,Q as f,c as P,av as U,au as V,u as T,a4 as j,ax as E,aB as M}from"./index-BC9OHaAo.js";import{Q as G,a as b,b as q}from"./QItem-DwlaYYkU.js";import{Q as H}from"./QList-Cjkoq4jn.js";import{Q as J}from"./QPage-CR9ZqGyQ.js";import{u as K}from"./auth-store-GnHU88NU.js";import{u as O}from"./useWishes-DnguVspT.js";import{u as X}from"./useFriends-DM8ATAQc.js";import{u as Y}from"./vue-i18n.runtime-QMuF0HHA.js";import"./supabase-NAtW2SFJ.js";const Z={class:"text-h4 q-mb-md"},ee={class:"row q-gutter-md justify-center"},te={class:"col-12 col-md-4"},ae={class:"text-h6 q-mt-md"},se={class:"text-h3 text-primary"},oe={class:"col-12 col-md-4"},ne={class:"text-h6 q-mt-md"},re={class:"text-h3 text-secondary"},de={class:"col-12 col-md-4"},ie={class:"text-h6 q-mt-md"},le={class:"text-h3 text-orange"},ce={class:"q-mt-lg"},ue={class:"text-h5 q-mb-md"},me={class:"text-subtitle1 q-mb-md"},fe={class:"text-h6 q-mt-md text-grey-6"},_e={class:"text-body2 text-grey-6"},Qe=z({__name:"IndexPage",setup(he){const w=T(),{t:n}=Y(),c=K(),{fetchWishes:R,fetchFriendsWishes:A}=O(),{fetchFriends:D,fetchPendingRequests:F}=X(),k=_(0),C=_(0),Q=_(0),v=_([]),I=a=>a.name&&a.surname?`${a.name} ${a.surname}`:a.username||a.email,W=a=>a.name&&a.surname?`${a.name.charAt(0)}${a.surname.charAt(0)}`:a.username?a.username.charAt(0).toUpperCase():a.email.charAt(0).toUpperCase(),B=a=>{const r=n("date.format");return new Date(a).toLocaleDateString(r)},S=a=>{const r=a.created_for_user.id;r&&w.push(`/app/friend/${r}?highlight=${a.id}`)},$=async()=>{if(c.user){const a=await R(c.user.id,!0);k.value=a?.data?.length||0;const r=await D(c.user.id,!0);C.value=r?.data?.length||0;const d=await F(c.user.id,!0);Q.value=d?.data?.length||0;const g=await A(c.user.id);g?.data&&(v.value=g.data.slice(0,5))}};return L($),N(()=>c.user,$,{immediate:!0}),(a,r)=>(u(),h(J,{class:"q-pa-md"},{default:e(()=>[o("div",Z,s(i(n)("app.welcome")),1),o("div",ee,[o("div",te,[t(f,{class:"text-center"},{default:e(()=>[t(m,null,{default:e(()=>[t(p,{name:"card_giftcard",size:"3rem",color:"primary"}),o("div",ae,s(i(n)("dashboard.myWishes")),1),o("div",se,s(k.value),1)]),_:1}),t(x,null,{default:e(()=>[t(y,{flat:"",color:"primary",onClick:r[0]||(r[0]=d=>a.$router.push("/app/wishes"))},{default:e(()=>[l(s(i(n)("dashboard.viewWishes")),1)]),_:1})]),_:1})]),_:1})]),o("div",oe,[t(f,{class:"text-center"},{default:e(()=>[t(m,null,{default:e(()=>[t(p,{name:"people",size:"3rem",color:"secondary"}),o("div",ne,s(i(n)("dashboard.friends")),1),o("div",re,s(C.value),1)]),_:1}),t(x,null,{default:e(()=>[t(y,{flat:"",color:"secondary",onClick:r[1]||(r[1]=d=>a.$router.push("/app/friends"))},{default:e(()=>[l(s(i(n)("dashboard.manageFriends")),1)]),_:1})]),_:1})]),_:1})]),o("div",de,[t(f,{class:"text-center"},{default:e(()=>[t(m,null,{default:e(()=>[t(p,{name:"notifications",size:"3rem",color:"orange"}),o("div",ie,s(i(n)("dashboard.requests")),1),o("div",le,s(Q.value),1)]),_:1}),t(x,null,{default:e(()=>[t(y,{flat:"",color:"orange",onClick:r[2]||(r[2]=d=>a.$router.push("/app/friends?tab=pending"))},{default:e(()=>[l(s(i(n)("dashboard.checkRequests")),1)]),_:1})]),_:1})]),_:1})])]),o("div",ce,[o("div",ue,s(i(n)("dashboard.recentActivity")),1),v.value.length>0?(u(),h(f,{key:0},{default:e(()=>[t(m,null,{default:e(()=>[o("div",me,s(i(n)("dashboard.newWishesFromFriends")),1),t(H,null,{default:e(()=>[(u(!0),P(V,null,U(v.value,d=>j((u(),h(G,{key:d.id,clickable:"",onClick:g=>S(d)},{default:e(()=>[t(b,{avatar:""},{default:e(()=>[t(E,{color:"primary","text-color":"white"},{default:e(()=>[l(s(W(d.created_for_user)),1)]),_:2},1024)]),_:2},1024),t(b,null,{default:e(()=>[t(q,null,{default:e(()=>[l(s(d.name),1)]),_:2},1024),t(q,{caption:""},{default:e(()=>[l(s(I(d.created_for_user)),1)]),_:2},1024)]),_:2},1024),t(b,{side:""},{default:e(()=>[t(q,{caption:""},{default:e(()=>[l(s(d.created_at?B(d.created_at):i(n)("common.unknown")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[M]])),128))]),_:1})]),_:1})]),_:1})):(u(),h(f,{key:1,class:"text-center q-py-lg"},{default:e(()=>[t(m,null,{default:e(()=>[t(p,{name:"info",size:"3rem",color:"grey-5"}),o("div",fe,s(i(n)("dashboard.noRecentActivity")),1),o("div",_e,s(i(n)("dashboard.noRecentActivityDescription")),1)]),_:1})]),_:1}))])]),_:1}))}});export{Qe as default};
