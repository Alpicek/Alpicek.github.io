import{Q as b}from"./QChip-CqgjwFLj.js";import{Q as v,a as g}from"./QCard-vJ8fZqiR.js";import{a as N,r as q,h as $,c as m,o as t,e as r,i as a,a1 as s,w as n,f as l,t as c,g as o,_ as p,Q as u}from"./index-DM363yaO.js";import{Q as P}from"./QCardActions-D3Hvl6Tx.js";import{u as Q}from"./usePushNotifications-B39xBTqy.js";import{u as E}from"./vue-i18n.runtime-BS_NomSs.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"q-pa-md"},L={class:"text-h6 q-mb-md"},V={class:"q-mb-md"},D={key:0,class:"q-mb-md"},I={key:1,class:"q-mb-md"},x={class:"text-h6 q-mb-md"},z={class:"text-body2 text-grey-6"},A=N({__name:"NotificationSettings",setup(G){const{t:d}=E(),i=Q(),f=q(!1);$(async()=>{await i.initialize(),console.log("Push Notifications initialized:",i)});const h=()=>{switch(i.permission.value){case"granted":return"positive";case"denied":return"negative";default:return"warning"}},_=()=>{switch(i.permission.value){case"granted":return"check_circle";case"denied":return"block";default:return"help"}},y=()=>{switch(i.permission.value){case"granted":return d("notifications.permissionGranted");case"denied":return d("notifications.permissionDenied");default:return d("notifications.permissionDefault")}},S=async()=>{try{await i.requestPermission()}catch(e){console.error("Error requesting permission:",e)}},k=async()=>{try{await i.subscribe()}catch(e){console.error("Error subscribing:",e)}},w=async()=>{try{await i.unsubscribe()}catch(e){console.error("Error unsubscribing:",e)}},C=async()=>{f.value=!0;try{await i.sendTestNotification()}catch(e){console.error("Error sending test notification:",e)}finally{f.value=!1}};return(e,M)=>(t(),m("div",B,[r(v,{class:"q-mb-md"},{default:n(()=>[r(g,null,{default:n(()=>[l("div",L,c(e.$t("notifications.title")),1),l("div",V,[r(b,{color:o(i).isSupported.value?"positive":"negative","text-color":"white",icon:o(i).isSupported.value?"check_circle":"error"},{default:n(()=>[p(c(o(i).isSupported.value?e.$t("notifications.supported"):e.$t("notifications.notSupported")),1)]),_:1},8,["color","icon"])]),o(i).isSupported.value?(t(),m("div",D,[r(b,{color:h(),"text-color":"white",icon:_()},{default:n(()=>[p(c(y()),1)]),_:1},8,["color","icon"])])):s("",!0),o(i).isSupported.value?(t(),m("div",I,[r(b,{color:o(i).isSubscribed.value?"positive":"grey","text-color":"white",icon:o(i).isSubscribed.value?"notifications_active":"notifications_off"},{default:n(()=>[p(c(o(i).isSubscribed.value?e.$t("notifications.subscribed"):e.$t("notifications.notSubscribed")),1)]),_:1},8,["color","icon"])])):s("",!0)]),_:1}),o(i).isSupported.value?(t(),a(P,{key:0,align:"around"},{default:n(()=>[o(i).needsPermission?(t(),a(u,{key:0,color:"primary",icon:"notifications",label:e.$t("notifications.requestPermission"),onClick:S,loading:o(i).isLoading.value},null,8,["label","loading"])):s("",!0),o(i).canSubscribe&&!o(i).isSubscribed.value?(t(),a(u,{key:1,color:"positive",icon:"notifications_active",label:e.$t("notifications.subscribe"),onClick:k,loading:o(i).isLoading.value},null,8,["label","loading"])):s("",!0),o(i).isSubscribed?(t(),a(u,{key:2,color:"negative",icon:"notifications_off",label:e.$t("notifications.unsubscribe"),onClick:w,loading:o(i).isLoading.value},null,8,["label","loading"])):s("",!0),o(i).isSubscribed?(t(),a(u,{key:3,color:"secondary",icon:"send",label:e.$t("notifications.sendTest"),onClick:C,loading:f.value},null,8,["label","loading"])):s("",!0)]),_:1})):s("",!0)]),_:1}),o(i).isSubscribed?(t(),a(v,{key:0},{default:n(()=>[r(g,null,{default:n(()=>[l("div",x,c(e.$t("notifications.history")),1),l("div",z,c(e.$t("notifications.historyEmpty")),1)]),_:1})]),_:1})):s("",!0)]))}}),U=T(A,[["__scopeId","data-v-23e531d6"]]);export{U as N};
