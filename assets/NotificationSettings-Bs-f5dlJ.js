import{Q as b}from"./QChip-mklSEZmv.js";import{Q as v,a as _}from"./QCard-BCQpJOfr.js";import{a as N,r as $,h as q,c as m,o,e as a,i as c,a1 as s,w as n,f as l,t as r,g as e,_ as p,Q as u}from"./index-Pn9jnbFE.js";import{Q}from"./QCardActions-Bd8qZCxV.js";import{u as P}from"./usePushNotifications-Bg3LGWxC.js";import{u as T}from"./vue-i18n.runtime-yAy4rlbr.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"q-pa-md"},V={class:"text-h6 q-mb-md"},D={class:"q-mb-md"},I={key:0,class:"q-mb-md"},x={key:1,class:"q-mb-md"},E={class:"text-h6 q-mb-md"},z={class:"text-body2 text-grey-6"},A=N({__name:"NotificationSettings",setup(G){const{t:d}=T(),i=P(),f=$(!1);q(async()=>{await i.initialize()});const h=()=>{switch(i.permission.value){case"granted":return"positive";case"denied":return"negative";default:return"warning"}},g=()=>{switch(i.permission.value){case"granted":return"check_circle";case"denied":return"block";default:return"help"}},y=()=>{switch(i.permission.value){case"granted":return d("notifications.permissionGranted");case"denied":return d("notifications.permissionDenied");default:return d("notifications.permissionDefault")}},S=async()=>{try{await i.requestPermission()}catch{}},k=async()=>{try{await i.subscribe()}catch{}},w=async()=>{try{await i.unsubscribe()}catch{}},C=async()=>{f.value=!0;try{await i.sendTestNotification()}catch{}finally{f.value=!1}};return(t,M)=>(o(),m("div",L,[a(v,{class:"q-mb-md"},{default:n(()=>[a(_,null,{default:n(()=>[l("div",V,r(t.$t("notifications.title")),1),l("div",D,[a(b,{color:e(i).isSupported.value?"positive":"negative","text-color":"white",icon:e(i).isSupported.value?"check_circle":"error"},{default:n(()=>[p(r(e(i).isSupported.value?t.$t("notifications.supported"):t.$t("notifications.notSupported")),1)]),_:1},8,["color","icon"])]),e(i).isSupported.value?(o(),m("div",I,[a(b,{color:h(),"text-color":"white",icon:g()},{default:n(()=>[p(r(y()),1)]),_:1},8,["color","icon"])])):s("",!0),e(i).isSupported.value?(o(),m("div",x,[a(b,{color:e(i).isSubscribed.value?"positive":"grey","text-color":"white",icon:e(i).isSubscribed.value?"notifications_active":"notifications_off"},{default:n(()=>[p(r(e(i).isSubscribed.value?t.$t("notifications.subscribed"):t.$t("notifications.notSubscribed")),1)]),_:1},8,["color","icon"])])):s("",!0)]),_:1}),e(i).isSupported.value?(o(),c(Q,{key:0,align:"around"},{default:n(()=>[e(i).needsPermission?(o(),c(u,{key:0,color:"primary",icon:"notifications",label:t.$t("notifications.requestPermission"),onClick:S,loading:e(i).isLoading.value},null,8,["label","loading"])):s("",!0),e(i).canSubscribe&&!e(i).isSubscribed.value?(o(),c(u,{key:1,color:"positive",icon:"notifications_active",label:t.$t("notifications.subscribe"),onClick:k,loading:e(i).isLoading.value},null,8,["label","loading"])):s("",!0),e(i).isSubscribed?(o(),c(u,{key:2,color:"negative",icon:"notifications_off",label:t.$t("notifications.unsubscribe"),onClick:w,loading:e(i).isLoading.value},null,8,["label","loading"])):s("",!0),e(i).isSubscribed?(o(),c(u,{key:3,color:"secondary",icon:"send",label:t.$t("notifications.sendTest"),onClick:C,loading:f.value},null,8,["label","loading"])):s("",!0)]),_:1})):s("",!0)]),_:1}),e(i).isSubscribed?(o(),c(v,{key:0},{default:n(()=>[a(_,null,{default:n(()=>[l("div",E,r(t.$t("notifications.history")),1),l("div",z,r(t.$t("notifications.historyEmpty")),1)]),_:1})]),_:1})):s("",!0)]))}}),U=B(A,[["__scopeId","data-v-c5cf8091"]]);export{U as N};
